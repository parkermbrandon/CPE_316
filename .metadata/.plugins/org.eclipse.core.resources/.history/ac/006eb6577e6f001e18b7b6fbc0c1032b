#include "ExternalDAC.h"

extern const uint16_t sine_wave[740] = {
    1861, 1877, 1893, 1908, 1924, 1940, 1956, 1972, 1987, 2003, 2019, 2035, 2050, 2066, 2082, 2097,
    2113, 2129, 2144, 2160, 2176, 2191, 2207, 2222, 2238, 2253, 2269, 2284, 2299, 2315, 2330, 2345,
    2360, 2376, 2391, 2406, 2421, 2436, 2451, 2466, 2481, 2496, 2511, 2525, 2540, 2555, 2570, 2584,
    2599, 2613, 2628, 2642, 2656, 2670, 2685, 2699, 2713, 2727, 2741, 2755, 2769, 2782, 2796, 2810,
    2823, 2837, 2850, 2864, 2877, 2890, 2903, 2916, 2929, 2942, 2955, 2968, 2980, 2993, 3005, 3018,
    3030, 3042, 3055, 3067, 3079, 3091, 3102, 3114, 3126, 3137, 3149, 3160, 3171, 3183, 3194, 3205,
    3215, 3226, 3237, 3248, 3258, 3268, 3279, 3289, 3299, 3309, 3319, 3329, 3338, 3348, 3357, 3367,
    3376, 3385, 3394, 3403, 3412, 3420, 3429, 3437, 3446, 3454, 3462, 3470, 3478, 3486, 3493, 3501,
    3508, 3516, 3523, 3530, 3537, 3544, 3550, 3557, 3563, 3570, 3576, 3582, 3588, 3594, 3599, 3605,
    3610, 3616, 3621, 3626, 3631, 3636, 3640, 3645, 3649, 3654, 3658, 3662, 3666, 3670, 3673, 3677,
    3680, 3683, 3687, 3690, 3692, 3695, 3698, 3700, 3703, 3705, 3707, 3709, 3711, 3712, 3714, 3715,
    3717, 3718, 3719, 3720, 3720, 3721, 3721, 3722, 3722, 3722, 3722, 3722, 3721, 3721, 3720, 3720,
    3719, 3718, 3717, 3715, 3714, 3712, 3711, 3709, 3707, 3705, 3703, 3700, 3698, 3695, 3692, 3690,
    3687, 3683, 3680, 3677, 3673, 3670, 3666, 3662, 3658, 3654, 3649, 3645, 3640, 3636, 3631, 3626,
    3621, 3616, 3610, 3605, 3599, 3594, 3588, 3582, 3576, 3570, 3563, 3557, 3550, 3544, 3537, 3530,
    3523, 3516, 3508, 3501, 3493, 3486, 3478, 3470, 3462, 3454, 3446, 3437, 3429, 3420, 3412, 3403,
    3394, 3385, 3376, 3367, 3357, 3348, 3338, 3329, 3319, 3309, 3299, 3289, 3279, 3268, 3258, 3248,
    3237, 3226, 3215, 3205, 3194, 3183, 3171, 3160, 3149, 3137, 3126, 3114, 3102, 3091, 3079, 3067,
    3055, 3042, 3030, 3018, 3005, 2993, 2980, 2968, 2955, 2942, 2929, 2916, 2903, 2890, 2877, 2864,
    2850, 2837, 2823, 2810, 2796, 2782, 2769, 2755, 2741, 2727, 2713, 2699, 2685, 2670, 2656, 2642,
    2628, 2613, 2599, 2584, 2570, 2555, 2540, 2525, 2511, 2496, 2481, 2466, 2451, 2436, 2421, 2406,
    2391, 2376, 2360, 2345, 2330, 2315, 2299, 2284, 2269, 2253, 2238, 2222, 2207, 2191, 2176, 2160,
    2144, 2129, 2113, 2097, 2082, 2066, 2050, 2035, 2019, 2003, 1987, 1972, 1956, 1940, 1924, 1908,
    1893, 1877, 1861, 1845, 1829, 1814, 1798, 1782, 1766, 1750, 1735, 1719, 1703, 1687, 1672, 1656,
    1640, 1625, 1609, 1593, 1578, 1562, 1546, 1531, 1515, 1500, 1484, 1469, 1453, 1438, 1423, 1407,
    1392, 1377, 1362, 1346, 1331, 1316, 1301, 1286, 1271, 1256, 1241, 1226, 1211, 1197, 1182, 1167,
    1152, 1138, 1123, 1109, 1094, 1080, 1066, 1052, 1037, 1023, 1009, 995, 981, 967, 953, 940,
    926, 912, 899, 885, 872, 858, 845, 832, 819, 806, 793, 780, 767, 754, 742, 729,
    717, 704, 692, 680, 667, 655, 643, 631, 620, 608, 596, 585, 573, 562, 551, 539,
    528, 517, 507, 496, 485, 474, 464, 454, 443, 433, 423, 413, 403, 393, 384, 374,
    365, 355, 346, 337, 328, 319, 310, 302, 293, 285, 276, 268, 260, 252, 244, 236,
    229, 221, 214, 206, 199, 192, 185, 178, 172, 165, 159, 152, 146, 140, 134, 128,
    123, 117, 112, 106, 101, 96, 91, 86, 82, 77, 73, 68, 64, 60, 56, 52,
    49, 45, 42, 39, 35, 32, 30, 27, 24, 22, 19, 17, 15, 13, 11, 10,
    8, 7, 5, 4, 3, 2, 2, 1, 1, 0, 0, 0, 0, 0, 1, 1,
    2, 2, 3, 4, 5, 7, 8, 10, 11, 13, 15, 17, 19, 22, 24, 27,
    30, 32, 35, 39, 42, 45, 49, 52, 56, 60, 64, 68, 73, 77, 82, 86,
    91, 96, 101, 106, 112, 117, 123, 128, 134, 140, 146, 152, 159, 165, 172, 178,
    185, 192, 199, 206, 214, 221, 229, 236, 244, 252, 260, 268, 276, 285, 293, 302,
    310, 319, 328, 337, 346, 355, 365, 374, 384, 393, 403, 413, 423, 433, 443, 454,
    464, 474, 485, 496, 507, 517, 528, 539, 551, 562, 573, 585, 596, 608, 620, 631,
    643, 655, 667, 680, 692, 704, 717, 729, 742, 754, 767, 780, 793, 806, 819, 832,
    845, 858, 872, 885, 899, 912, 926, 940, 953, 967, 981, 995, 1009, 1023, 1037, 1052,
    1066, 1080, 1094, 1109, 1123, 1138, 1152, 1167, 1182, 1197, 1211, 1226, 1241, 1256, 1271, 1286,
    1301, 1316, 1331, 1346, 1362, 1377, 1392, 1407, 1423, 1438, 1453, 1469, 1484, 1500, 1515, 1531,
    1546, 1562, 1578, 1593, 1609, 1625, 1640, 1656, 1672, 1687, 1703, 1719, 1735, 1750, 1766, 1782,
    1798, 1814, 1829, 1845,
};
extern const uint16_t square_wave[740] = {
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861,
};
extern const uint16_t sawtooth_wave[740] = {
    1861, 1864, 1866, 1869, 1871, 1874, 1876, 1879, 1881, 1884, 1886, 1889, 1891, 1894, 1896, 1899,
    1901, 1904, 1906, 1909, 1911, 1914, 1916, 1919, 1921, 1924, 1926, 1929, 1931, 1934, 1936, 1939,
    1941, 1944, 1947, 1949, 1952, 1954, 1957, 1959, 1962, 1964, 1967, 1969, 1972, 1974, 1977, 1979,
    1982, 1984, 1987, 1989, 1992, 1994, 1997, 1999, 2002, 2004, 2007, 2009, 2012, 2014, 2017, 2019,
    2022, 2024, 2027, 2029, 2032, 2035, 2037, 2040, 2042, 2045, 2047, 2050, 2052, 2055, 2057, 2060,
    2062, 2065, 2067, 2070, 2072, 2075, 2077, 2080, 2082, 2085, 2087, 2090, 2092, 2095, 2097, 2100,
    2102, 2105, 2107, 2110, 2112, 2115, 2118, 2120, 2123, 2125, 2128, 2130, 2133, 2135, 2138, 2140,
    2143, 2145, 2148, 2150, 2153, 2155, 2158, 2160, 2163, 2165, 2168, 2170, 2173, 2175, 2178, 2180,
    2183, 2185, 2188, 2190, 2193, 2195, 2198, 2201, 2203, 2206, 2208, 2211, 2213, 2216, 2218, 2221,
    2223, 2226, 2228, 2231, 2233, 2236, 2238, 2241, 2243, 2246, 2248, 2251, 2253, 2256, 2258, 2261,
    2263, 2266, 2268, 2271, 2273, 2276, 2278, 2281, 2283, 2286, 2289, 2291, 2294, 2296, 2299, 2301,
    2304, 2306, 2309, 2311, 2314, 2316, 2319, 2321, 2324, 2326, 2329, 2331, 2334, 2336, 2339, 2341,
    2344, 2346, 2349, 2351, 2354, 2356, 2359, 2361, 2364, 2366, 2369, 2372, 2374, 2377, 2379, 2382,
    2384, 2387, 2389, 2392, 2394, 2397, 2399, 2402, 2404, 2407, 2409, 2412, 2414, 2417, 2419, 2422,
    2424, 2427, 2429, 2432, 2434, 2437, 2439, 2442, 2444, 2447, 2449, 2452, 2455, 2457, 2460, 2462,
    2465, 2467, 2470, 2472, 2475, 2477, 2480, 2482, 2485, 2487, 2490, 2492, 2495, 2497, 2500, 2502,
    2505, 2507, 2510, 2512, 2515, 2517, 2520, 2522, 2525, 2527, 2530, 2532, 2535, 2537, 2540, 2543,
    2545, 2548, 2550, 2553, 2555, 2558, 2560, 2563, 2565, 2568, 2570, 2573, 2575, 2578, 2580, 2583,
    2585, 2588, 2590, 2593, 2595, 2598, 2600, 2603, 2605, 2608, 2610, 2613, 2615, 2618, 2620, 2623,
    2626, 2628, 2631, 2633, 2636, 2638, 2641, 2643, 2646, 2648, 2651, 2653, 2656, 2658, 2661, 2663,
    2666, 2668, 2671, 2673, 2676, 2678, 2681, 2683, 2686, 2688, 2691, 2693, 2696, 2698, 2701, 2703,
    2706, 2709, 2711, 2714, 2716, 2719, 2721, 2724, 2726, 2729, 2731, 2734, 2736, 2739, 2741, 2744,
    2746, 2749, 2751, 2754, 2756, 2759, 2761, 2764, 2766, 2769, 2771, 2774, 2776, 2779, 2781, 2784,
    2786, 2789, 2792, 2794, 2797, 2799, 2802, 2804, 2807, 2809, 2812, 2814, 2817, 2819, 2822, 2824,
    2827, 2829, 2832, 2834, 2837, 2839, 2842, 2844, 2847, 2849, 2852, 2854, 2857, 2859, 2862, 2864,
    2867, 2869, 2872, 2874, 2877, 2880, 2882, 2885, 2887, 2890, 2892, 2895, 2897, 2900, 2902, 2905,
    2907, 2910, 2912, 2915, 2917, 2920, 2922, 2925, 2927, 2930, 2932, 2935, 2937, 2940, 2942, 2945,
    2947, 2950, 2952, 2955, 2957, 2960, 2963, 2965, 2968, 2970, 2973, 2975, 2978, 2980, 2983, 2985,
    2988, 2990, 2993, 2995, 2998, 3000, 3003, 3005, 3008, 3010, 3013, 3015, 3018, 3020, 3023, 3025,
    3028, 3030, 3033, 3035, 3038, 3040, 3043, 3046, 3048, 3051, 3053, 3056, 3058, 3061, 3063, 3066,
    3068, 3071, 3073, 3076, 3078, 3081, 3083, 3086, 3088, 3091, 3093, 3096, 3098, 3101, 3103, 3106,
    3108, 3111, 3113, 3116, 3118, 3121, 3123, 3126, 3128, 3131, 3134, 3136, 3139, 3141, 3144, 3146,
    3149, 3151, 3154, 3156, 3159, 3161, 3164, 3166, 3169, 3171, 3174, 3176, 3179, 3181, 3184, 3186,
    3189, 3191, 3194, 3196, 3199, 3201, 3204, 3206, 3209, 3211, 3214, 3217, 3219, 3222, 3224, 3227,
    3229, 3232, 3234, 3237, 3239, 3242, 3244, 3247, 3249, 3252, 3254, 3257, 3259, 3262, 3264, 3267,
    3269, 3272, 3274, 3277, 3279, 3282, 3284, 3287, 3289, 3292, 3294, 3297, 3300, 3302, 3305, 3307,
    3310, 3312, 3315, 3317, 3320, 3322, 3325, 3327, 3330, 3332, 3335, 3337, 3340, 3342, 3345, 3347,
    3350, 3352, 3355, 3357, 3360, 3362, 3365, 3367, 3370, 3372, 3375, 3377, 3380, 3382, 3385, 3388,
    3390, 3393, 3395, 3398, 3400, 3403, 3405, 3408, 3410, 3413, 3415, 3418, 3420, 3423, 3425, 3428,
    3430, 3433, 3435, 3438, 3440, 3443, 3445, 3448, 3450, 3453, 3455, 3458, 3460, 3463, 3465, 3468,
    3471, 3473, 3476, 3478, 3481, 3483, 3486, 3488, 3491, 3493, 3496, 3498, 3501, 3503, 3506, 3508,
    3511, 3513, 3516, 3518, 3521, 3523, 3526, 3528, 3531, 3533, 3536, 3538, 3541, 3543, 3546, 3548,
    3551, 3554, 3556, 3559, 3561, 3564, 3566, 3569, 3571, 3574, 3576, 3579, 3581, 3584, 3586, 3589,
    3591, 3594, 3596, 3599, 3601, 3604, 3606, 3609, 3611, 3614, 3616, 3619, 3621, 3624, 3626, 3629,
    3631, 3634, 3636, 3639, 3642, 3644, 3647, 3649, 3652, 3654, 3657, 3659, 3662, 3664, 3667, 3669,
    3672, 3674, 3677, 3679, 3682, 3684, 3687, 3689, 3692, 3694, 3697, 3699, 3702, 3704, 3707, 3709,
    3712, 3714, 3717, 3719,
};
extern const uint16_t triangle_wave[740] = {
    1861, 1866, 1871, 1876, 1881, 1886, 1891, 1896, 1901, 1906, 1911, 1916, 1921, 1926, 1931, 1936,
    1941, 1947, 1952, 1957, 1962, 1967, 1972, 1977, 1982, 1987, 1992, 1997, 2002, 2007, 2012, 2017,
    2022, 2027, 2032, 2037, 2042, 2047, 2052, 2057, 2062, 2067, 2072, 2077, 2082, 2087, 2092, 2097,
    2102, 2107, 2112, 2118, 2123, 2128, 2133, 2138, 2143, 2148, 2153, 2158, 2163, 2168, 2173, 2178,
    2183, 2188, 2193, 2198, 2203, 2208, 2213, 2218, 2223, 2228, 2233, 2238, 2243, 2248, 2253, 2258,
    2263, 2268, 2273, 2278, 2283, 2289, 2294, 2299, 2304, 2309, 2314, 2319, 2324, 2329, 2334, 2339,
    2344, 2349, 2354, 2359, 2364, 2369, 2374, 2379, 2384, 2389, 2394, 2399, 2404, 2409, 2414, 2419,
    2424, 2429, 2434, 2439, 2444, 2449, 2455, 2460, 2465, 2470, 2475, 2480, 2485, 2490, 2495, 2500,
    2505, 2510, 2515, 2520, 2525, 2530, 2535, 2540, 2545, 2550, 2555, 2560, 2565, 2570, 2575, 2580,
    2585, 2590, 2595, 2600, 2605, 2610, 2615, 2620, 2626, 2631, 2636, 2641, 2646, 2651, 2656, 2661,
    2666, 2671, 2676, 2681, 2686, 2691, 2696, 2701, 2706, 2711, 2716, 2721, 2726, 2731, 2736, 2741,
    2746, 2751, 2756, 2761, 2766, 2771, 2776, 2781, 2786, 2792, 2797, 2802, 2807, 2812, 2817, 2822,
    2827, 2832, 2837, 2842, 2847, 2852, 2857, 2862, 2867, 2872, 2877, 2882, 2887, 2892, 2897, 2902,
    2907, 2912, 2917, 2922, 2927, 2932, 2937, 2942, 2947, 2952, 2957, 2963, 2968, 2973, 2978, 2983,
    2988, 2993, 2998, 3003, 3008, 3013, 3018, 3023, 3028, 3033, 3038, 3043, 3048, 3053, 3058, 3063,
    3068, 3073, 3078, 3083, 3088, 3093, 3098, 3103, 3108, 3113, 3118, 3123, 3128, 3134, 3139, 3144,
    3149, 3154, 3159, 3164, 3169, 3174, 3179, 3184, 3189, 3194, 3199, 3204, 3209, 3214, 3219, 3224,
    3229, 3234, 3239, 3244, 3249, 3254, 3259, 3264, 3269, 3274, 3279, 3284, 3289, 3294, 3300, 3305,
    3310, 3315, 3320, 3325, 3330, 3335, 3340, 3345, 3350, 3355, 3360, 3365, 3370, 3375, 3380, 3385,
    3390, 3395, 3400, 3405, 3410, 3415, 3420, 3425, 3430, 3435, 3440, 3445, 3450, 3455, 3460, 3465,
    3471, 3476, 3481, 3486, 3491, 3496, 3501, 3506, 3511, 3516, 3521, 3526, 3531, 3536, 3541, 3546,
    3551, 3556, 3561, 3566, 3571, 3576, 3581, 3586, 3591, 3596, 3601, 3606, 3611, 3616, 3621, 3626,
    3631, 3636, 3642, 3647, 3652, 3657, 3662, 3667, 3672, 3677, 3682, 3687, 3692, 3697, 3702, 3707,
    3712, 3717, 3722, 3717, 3712, 3707, 3702, 3697, 3692, 3687, 3682, 3677, 3672, 3667, 3662, 3657,
    3652, 3647, 3642, 3636, 3631, 3626, 3621, 3616, 3611, 3606, 3601, 3596, 3591, 3586, 3581, 3576,
    3571, 3566, 3561, 3556, 3551, 3546, 3541, 3536, 3531, 3526, 3521, 3516, 3511, 3506, 3501, 3496,
    3491, 3486, 3481, 3476, 3471, 3465, 3460, 3455, 3450, 3445, 3440, 3435, 3430, 3425, 3420, 3415,
    3410, 3405, 3400, 3395, 3390, 3385, 3380, 3375, 3370, 3365, 3360, 3355, 3350, 3345, 3340, 3335,
    3330, 3325, 3320, 3315, 3310, 3305, 3300, 3294, 3289, 3284, 3279, 3274, 3269, 3264, 3259, 3254,
    3249, 3244, 3239, 3234, 3229, 3224, 3219, 3214, 3209, 3204, 3199, 3194, 3189, 3184, 3179, 3174,
    3169, 3164, 3159, 3154, 3149, 3144, 3139, 3134, 3128, 3123, 3118, 3113, 3108, 3103, 3098, 3093,
    3088, 3083, 3078, 3073, 3068, 3063, 3058, 3053, 3048, 3043, 3038, 3033, 3028, 3023, 3018, 3013,
    3008, 3003, 2998, 2993, 2988, 2983, 2978, 2973, 2968, 2963, 2957, 2952, 2947, 2942, 2937, 2932,
    2927, 2922, 2917, 2912, 2907, 2902, 2897, 2892, 2887, 2882, 2877, 2872, 2867, 2862, 2857, 2852,
    2847, 2842, 2837, 2832, 2827, 2822, 2817, 2812, 2807, 2802, 2797, 2792, 2786, 2781, 2776, 2771,
    2766, 2761, 2756, 2751, 2746, 2741, 2736, 2731, 2726, 2721, 2716, 2711, 2706, 2701, 2696, 2691,
    2686, 2681, 2676, 2671, 2666, 2661, 2656, 2651, 2646, 2641, 2636, 2631, 2626, 2620, 2615, 2610,
    2605, 2600, 2595, 2590, 2585, 2580, 2575, 2570, 2565, 2560, 2555, 2550, 2545, 2540, 2535, 2530,
    2525, 2520, 2515, 2510, 2505, 2500, 2495, 2490, 2485, 2480, 2475, 2470, 2465, 2460, 2455, 2449,
    2444, 2439, 2434, 2429, 2424, 2419, 2414, 2409, 2404, 2399, 2394, 2389, 2384, 2379, 2374, 2369,
    2364, 2359, 2354, 2349, 2344, 2339, 2334, 2329, 2324, 2319, 2314, 2309, 2304, 2299, 2294, 2289,
    2283, 2278, 2273, 2268, 2263, 2258, 2253, 2248, 2243, 2238, 2233, 2228, 2223, 2218, 2213, 2208,
    2203, 2198, 2193, 2188, 2183, 2178, 2173, 2168, 2163, 2158, 2153, 2148, 2143, 2138, 2133, 2128,
    2123, 2118, 2112, 2107, 2102, 2097, 2092, 2087, 2082, 2077, 2072, 2067, 2062, 2057, 2052, 2047,
    2042, 2037, 2032, 2027, 2022, 2017, 2012, 2007, 2002, 1997, 1992, 1987, 1982, 1977, 1972, 1967,
    1962, 1957, 1952, 1947, 1941, 1936, 1931, 1926, 1921, 1916, 1911, 1906, 1901, 1896, 1891, 1886,
    1881, 1876, 1871, 1866,
};
External_DAC::External_DAC() {

}

External_DAC::~External_DAC() {
}

void External_DAC::DAC_init(void)
{
    RCC->AHB2ENR |= RCC_AHB2ENR_GPIOAEN;
    GPIOA->MODER &= ~(GPIO_MODER_MODE4 | GPIO_MODER_MODE5 | GPIO_MODER_MODE6 | GPIO_MODER_MODE7);
    GPIOA->MODER |= (GPIO_MODER_MODE4_1 | GPIO_MODER_MODE5_1 | GPIO_MODER_MODE6_1 | GPIO_MODER_MODE7_1);
    GPIOA->AFR[0] &= ~(GPIO_AFRL_AFSEL4 | GPIO_AFRL_AFSEL5 | GPIO_AFRL_AFSEL6 | GPIO_AFRL_AFSEL7);
    GPIOA->AFR[0] |= ((5 << GPIO_AFRL_AFSEL4_Pos) | (5 << GPIO_AFRL_AFSEL5_Pos) | (5 << GPIO_AFRL_AFSEL6_Pos) | (5 << GPIO_AFRL_AFSEL7_Pos));
    GPIOA->OTYPER &= ~(GPIO_OTYPER_OT4 | GPIO_OTYPER_OT5 | GPIO_OTYPER_OT6 | GPIO_OTYPER_OT7);
    GPIOA->PUPDR &= ~(GPIO_PUPDR_PUPD4 | GPIO_PUPDR_PUPD5 | GPIO_PUPDR_PUPD6 | GPIO_PUPDR_PUPD7);
    RCC->APB2ENR |= RCC_APB2ENR_SPI1EN;
    SPI1->CR1 = SPI_CR1_MSTR | SPI_CR1_BR_1;  // Set prescaler to fPCLK/4
    SPI1->CR2 = SPI_CR2_SSOE | SPI_CR2_NSSP | (0xF << SPI_CR2_DS_Pos);
    SPI1->CR1 |= SPI_CR1_SPE;
}

// Convert a voltage value into a 12-bit value to control the DAC
uint16_t External_DAC::DAC_mvolt_convert(float mvoltage)
{
	return (mvoltage * 4095) / 3300;
}

void External_DAC::DAC_write(uint16_t value_A, uint16_t value_B)
//void External_DAC::DAC_write(uint16_t value_A)
{
    uint16_t spi_data_A = (value_A & 0x0FFF) | 0x3000;  // For DACA
    uint16_t spi_data_B = (value_B & 0x0FFF) | 0xB000;  // For DACB

    // Write to DACA
    while(!(SPI1->SR & SPI_SR_TXE));
    SPI1->DR = spi_data_A;

    // Write to DACB
    while(!(SPI1->SR & SPI_SR_TXE));
    SPI1->DR = spi_data_B;
}


/* Matlab script for generating lookup tables
% Parameters
fs = 256;  % Sampling frequency
t = 0:1/fs:1-1/fs;  % Time vector
Vref = 3.3;  % Reference voltage
bit_depth = 4095;  % 12-bit DAC
dc_offset = 1.5;  % DC offset in volts
Vpp = 3.0;  % Peak-to-peak voltage in volts

% Scaling factors
scale_factor = bit_depth / Vref;
dc_offset_scaled = round(dc_offset * scale_factor);
amplitude_scaled = round((Vpp / 2) * scale_factor);

% Generate Sine Wave
sine_wave = round(dc_offset_scaled + amplitude_scaled * sin(2 * pi * t));

% Generate Square Wave
square_wave = round(dc_offset_scaled + amplitude_scaled * (square(2 * pi * t) + 1) / 2);

% Generate Triangle Wave
triangle_wave = round(dc_offset_scaled + amplitude_scaled * (sawtooth(2 * pi * t, 0.5) + 1) / 2);

% Generate Sawtooth Wave
sawtooth_wave = round(dc_offset_scaled + amplitude_scaled * (sawtooth(2 * pi * t) + 1) / 2);

% Print Lookup Tables
print_lookup_table('sine_wave', sine_wave);
print_lookup_table('square_wave', square_wave);
print_lookup_table('sawtooth_wave', sawtooth_wave);
print_lookup_table('triangle_wave', triangle_wave);

% Function to print lookup table in 16x16 format
function print_lookup_table(name, data)
    fprintf('extern const uint16_t %s[%d] = {\n', name, length(data));
    for i = 1:16:length(data)
        fprintf('    ');
        fprintf('%d, ', data(i:min(i+15, end)));
        fprintf('\n');
    end
    fprintf('};\n');
end
 */




