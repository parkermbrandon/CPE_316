#include "ExternalDAC.h"

extern const uint16_t sine_wave[836] = {
    1861, 1875, 1889, 1903, 1917, 1931, 1945, 1959, 1973, 1987, 2001, 2015, 2029, 2043, 2056, 2070,
    2084, 2098, 2112, 2126, 2140, 2154, 2167, 2181, 2195, 2209, 2222, 2236, 2250, 2263, 2277, 2291,
    2304, 2318, 2331, 2345, 2358, 2372, 2385, 2399, 2412, 2425, 2439, 2452, 2465, 2478, 2492, 2505,
    2518, 2531, 2544, 2557, 2570, 2583, 2596, 2609, 2621, 2634, 2647, 2659, 2672, 2685, 2697, 2710,
    2722, 2734, 2747, 2759, 2771, 2783, 2796, 2808, 2820, 2832, 2843, 2855, 2867, 2879, 2891, 2902,
    2914, 2925, 2937, 2948, 2959, 2971, 2982, 2993, 3004, 3015, 3026, 3037, 3048, 3058, 3069, 3080,
    3090, 3101, 3111, 3121, 3132, 3142, 3152, 3162, 3172, 3182, 3192, 3201, 3211, 3221, 3230, 3240,
    3249, 3258, 3267, 3277, 3286, 3295, 3303, 3312, 3321, 3330, 3338, 3347, 3355, 3363, 3371, 3380,
    3388, 3396, 3403, 3411, 3419, 3427, 3434, 3442, 3449, 3456, 3463, 3470, 3477, 3484, 3491, 3498,
    3504, 3511, 3517, 3524, 3530, 3536, 3542, 3548, 3554, 3560, 3565, 3571, 3576, 3582, 3587, 3592,
    3597, 3602, 3607, 3612, 3617, 3621, 3626, 3630, 3634, 3639, 3643, 3647, 3651, 3654, 3658, 3662,
    3665, 3668, 3672, 3675, 3678, 3681, 3684, 3687, 3689, 3692, 3694, 3697, 3699, 3701, 3703, 3705,
    3707, 3709, 3710, 3712, 3713, 3714, 3716, 3717, 3718, 3719, 3719, 3720, 3721, 3721, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3721, 3721, 3720, 3719, 3719, 3718, 3717, 3716, 3714, 3713, 3712,
    3710, 3709, 3707, 3705, 3703, 3701, 3699, 3697, 3694, 3692, 3689, 3687, 3684, 3681, 3678, 3675,
    3672, 3668, 3665, 3662, 3658, 3654, 3651, 3647, 3643, 3639, 3634, 3630, 3626, 3621, 3617, 3612,
    3607, 3602, 3597, 3592, 3587, 3582, 3576, 3571, 3565, 3560, 3554, 3548, 3542, 3536, 3530, 3524,
    3517, 3511, 3504, 3498, 3491, 3484, 3477, 3470, 3463, 3456, 3449, 3442, 3434, 3427, 3419, 3411,
    3403, 3396, 3388, 3380, 3371, 3363, 3355, 3347, 3338, 3330, 3321, 3312, 3303, 3295, 3286, 3277,
    3267, 3258, 3249, 3240, 3230, 3221, 3211, 3201, 3192, 3182, 3172, 3162, 3152, 3142, 3132, 3121,
    3111, 3101, 3090, 3080, 3069, 3058, 3048, 3037, 3026, 3015, 3004, 2993, 2982, 2971, 2959, 2948,
    2937, 2925, 2914, 2902, 2891, 2879, 2867, 2855, 2843, 2832, 2820, 2808, 2796, 2783, 2771, 2759,
    2747, 2734, 2722, 2710, 2697, 2685, 2672, 2659, 2647, 2634, 2621, 2609, 2596, 2583, 2570, 2557,
    2544, 2531, 2518, 2505, 2492, 2478, 2465, 2452, 2439, 2425, 2412, 2399, 2385, 2372, 2358, 2345,
    2331, 2318, 2304, 2291, 2277, 2263, 2250, 2236, 2222, 2209, 2195, 2181, 2167, 2154, 2140, 2126,
    2112, 2098, 2084, 2070, 2056, 2043, 2029, 2015, 2001, 1987, 1973, 1959, 1945, 1931, 1917, 1903,
    1889, 1875, 1861, 1847, 1833, 1819, 1805, 1791, 1777, 1763, 1749, 1735, 1721, 1707, 1693, 1679,
    1666, 1652, 1638, 1624, 1610, 1596, 1582, 1568, 1555, 1541, 1527, 1513, 1500, 1486, 1472, 1459,
    1445, 1431, 1418, 1404, 1391, 1377, 1364, 1350, 1337, 1323, 1310, 1297, 1283, 1270, 1257, 1244,
    1230, 1217, 1204, 1191, 1178, 1165, 1152, 1139, 1126, 1113, 1101, 1088, 1075, 1063, 1050, 1037,
    1025, 1012, 1000, 988, 975, 963, 951, 939, 926, 914, 902, 890, 879, 867, 855, 843,
    831, 820, 808, 797, 785, 774, 763, 751, 740, 729, 718, 707, 696, 685, 674, 664,
    653, 642, 632, 621, 611, 601, 590, 580, 570, 560, 550, 540, 530, 521, 511, 501,
    492, 482, 473, 464, 455, 445, 436, 427, 419, 410, 401, 392, 384, 375, 367, 359,
    351, 342, 334, 326, 319, 311, 303, 295, 288, 280, 273, 266, 259, 252, 245, 238,
    231, 224, 218, 211, 205, 198, 192, 186, 180, 174, 168, 162, 157, 151, 146, 140,
    135, 130, 125, 120, 115, 110, 105, 101, 96, 92, 88, 83, 79, 75, 71, 68,
    64, 60, 57, 54, 50, 47, 44, 41, 38, 35, 33, 30, 28, 25, 23, 21,
    19, 17, 15, 13, 12, 10, 9, 8, 6, 5, 4, 3, 3, 2, 1, 1,
    0, 0, 0, 0, 0, 0, 0, 1, 1, 2, 3, 3, 4, 5, 6, 8,
    9, 10, 12, 13, 15, 17, 19, 21, 23, 25, 28, 30, 33, 35, 38, 41,
    44, 47, 50, 54, 57, 60, 64, 68, 71, 75, 79, 83, 88, 92, 96, 101,
    105, 110, 115, 120, 125, 130, 135, 140, 146, 151, 157, 162, 168, 174, 180, 186,
    192, 198, 205, 211, 218, 224, 231, 238, 245, 252, 259, 266, 273, 280, 288, 295,
    303, 311, 319, 326, 334, 342, 351, 359, 367, 375, 384, 392, 401, 410, 419, 427,
    436, 445, 455, 464, 473, 482, 492, 501, 511, 521, 530, 540, 550, 560, 570, 580,
    590, 601, 611, 621, 632, 642, 653, 664, 674, 685, 696, 707, 718, 729, 740, 751,
    763, 774, 785, 797, 808, 820, 831, 843, 855, 867, 879, 890, 902, 914, 926, 939,
    951, 963, 975, 988, 1000, 1012, 1025, 1037, 1050, 1063, 1075, 1088, 1101, 1113, 1126, 1139,
    1152, 1165, 1178, 1191, 1204, 1217, 1230, 1244, 1257, 1270, 1283, 1297, 1310, 1323, 1337, 1350,
    1364, 1377, 1391, 1404, 1418, 1431, 1445, 1459, 1472, 1486, 1500, 1513, 1527, 1541, 1555, 1568,
    1582, 1596, 1610, 1624, 1638, 1652, 1666, 1679, 1693, 1707, 1721, 1735, 1749, 1763, 1777, 1791,
    1805, 1819, 1833, 1847,
};
extern const uint16_t square_wave[836] = {
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722, 3722,
    3722, 3722, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861, 1861,
    1861, 1861, 1861, 1861,
};
extern const uint16_t sawtooth_wave[836] = {
    1861, 1863, 1865, 1868, 1870, 1872, 1874, 1877, 1879, 1881, 1883, 1885, 1888, 1890, 1892, 1894,
    1897, 1899, 1901, 1903, 1906, 1908, 1910, 1912, 1914, 1917, 1919, 1921, 1923, 1926, 1928, 1930,
    1932, 1934, 1937, 1939, 1941, 1943, 1946, 1948, 1950, 1952, 1954, 1957, 1959, 1961, 1963, 1966,
    1968, 1970, 1972, 1975, 1977, 1979, 1981, 1983, 1986, 1988, 1990, 1992, 1995, 1997, 1999, 2001,
    2003, 2006, 2008, 2010, 2012, 2015, 2017, 2019, 2021, 2024, 2026, 2028, 2030, 2032, 2035, 2037,
    2039, 2041, 2044, 2046, 2048, 2050, 2052, 2055, 2057, 2059, 2061, 2064, 2066, 2068, 2070, 2072,
    2075, 2077, 2079, 2081, 2084, 2086, 2088, 2090, 2093, 2095, 2097, 2099, 2101, 2104, 2106, 2108,
    2110, 2113, 2115, 2117, 2119, 2121, 2124, 2126, 2128, 2130, 2133, 2135, 2137, 2139, 2141, 2144,
    2146, 2148, 2150, 2153, 2155, 2157, 2159, 2162, 2164, 2166, 2168, 2170, 2173, 2175, 2177, 2179,
    2182, 2184, 2186, 2188, 2190, 2193, 2195, 2197, 2199, 2202, 2204, 2206, 2208, 2210, 2213, 2215,
    2217, 2219, 2222, 2224, 2226, 2228, 2231, 2233, 2235, 2237, 2239, 2242, 2244, 2246, 2248, 2251,
    2253, 2255, 2257, 2259, 2262, 2264, 2266, 2268, 2271, 2273, 2275, 2277, 2280, 2282, 2284, 2286,
    2288, 2291, 2293, 2295, 2297, 2300, 2302, 2304, 2306, 2308, 2311, 2313, 2315, 2317, 2320, 2322,
    2324, 2326, 2328, 2331, 2333, 2335, 2337, 2340, 2342, 2344, 2346, 2349, 2351, 2353, 2355, 2357,
    2360, 2362, 2364, 2366, 2369, 2371, 2373, 2375, 2377, 2380, 2382, 2384, 2386, 2389, 2391, 2393,
    2395, 2397, 2400, 2402, 2404, 2406, 2409, 2411, 2413, 2415, 2418, 2420, 2422, 2424, 2426, 2429,
    2431, 2433, 2435, 2438, 2440, 2442, 2444, 2446, 2449, 2451, 2453, 2455, 2458, 2460, 2462, 2464,
    2466, 2469, 2471, 2473, 2475, 2478, 2480, 2482, 2484, 2487, 2489, 2491, 2493, 2495, 2498, 2500,
    2502, 2504, 2507, 2509, 2511, 2513, 2515, 2518, 2520, 2522, 2524, 2527, 2529, 2531, 2533, 2536,
    2538, 2540, 2542, 2544, 2547, 2549, 2551, 2553, 2556, 2558, 2560, 2562, 2564, 2567, 2569, 2571,
    2573, 2576, 2578, 2580, 2582, 2584, 2587, 2589, 2591, 2593, 2596, 2598, 2600, 2602, 2605, 2607,
    2609, 2611, 2613, 2616, 2618, 2620, 2622, 2625, 2627, 2629, 2631, 2633, 2636, 2638, 2640, 2642,
    2645, 2647, 2649, 2651, 2653, 2656, 2658, 2660, 2662, 2665, 2667, 2669, 2671, 2674, 2676, 2678,
    2680, 2682, 2685, 2687, 2689, 2691, 2694, 2696, 2698, 2700, 2702, 2705, 2707, 2709, 2711, 2714,
    2716, 2718, 2720, 2722, 2725, 2727, 2729, 2731, 2734, 2736, 2738, 2740, 2743, 2745, 2747, 2749,
    2751, 2754, 2756, 2758, 2760, 2763, 2765, 2767, 2769, 2771, 2774, 2776, 2778, 2780, 2783, 2785,
    2787, 2789, 2792, 2794, 2796, 2798, 2800, 2803, 2805, 2807, 2809, 2812, 2814, 2816, 2818, 2820,
    2823, 2825, 2827, 2829, 2832, 2834, 2836, 2838, 2840, 2843, 2845, 2847, 2849, 2852, 2854, 2856,
    2858, 2861, 2863, 2865, 2867, 2869, 2872, 2874, 2876, 2878, 2881, 2883, 2885, 2887, 2889, 2892,
    2894, 2896, 2898, 2901, 2903, 2905, 2907, 2909, 2912, 2914, 2916, 2918, 2921, 2923, 2925, 2927,
    2930, 2932, 2934, 2936, 2938, 2941, 2943, 2945, 2947, 2950, 2952, 2954, 2956, 2958, 2961, 2963,
    2965, 2967, 2970, 2972, 2974, 2976, 2978, 2981, 2983, 2985, 2987, 2990, 2992, 2994, 2996, 2999,
    3001, 3003, 3005, 3007, 3010, 3012, 3014, 3016, 3019, 3021, 3023, 3025, 3027, 3030, 3032, 3034,
    3036, 3039, 3041, 3043, 3045, 3047, 3050, 3052, 3054, 3056, 3059, 3061, 3063, 3065, 3068, 3070,
    3072, 3074, 3076, 3079, 3081, 3083, 3085, 3088, 3090, 3092, 3094, 3096, 3099, 3101, 3103, 3105,
    3108, 3110, 3112, 3114, 3117, 3119, 3121, 3123, 3125, 3128, 3130, 3132, 3134, 3137, 3139, 3141,
    3143, 3145, 3148, 3150, 3152, 3154, 3157, 3159, 3161, 3163, 3165, 3168, 3170, 3172, 3174, 3177,
    3179, 3181, 3183, 3186, 3188, 3190, 3192, 3194, 3197, 3199, 3201, 3203, 3206, 3208, 3210, 3212,
    3214, 3217, 3219, 3221, 3223, 3226, 3228, 3230, 3232, 3234, 3237, 3239, 3241, 3243, 3246, 3248,
    3250, 3252, 3255, 3257, 3259, 3261, 3263, 3266, 3268, 3270, 3272, 3275, 3277, 3279, 3281, 3283,
    3286, 3288, 3290, 3292, 3295, 3297, 3299, 3301, 3303, 3306, 3308, 3310, 3312, 3315, 3317, 3319,
    3321, 3324, 3326, 3328, 3330, 3332, 3335, 3337, 3339, 3341, 3344, 3346, 3348, 3350, 3352, 3355,
    3357, 3359, 3361, 3364, 3366, 3368, 3370, 3373, 3375, 3377, 3379, 3381, 3384, 3386, 3388, 3390,
    3393, 3395, 3397, 3399, 3401, 3404, 3406, 3408, 3410, 3413, 3415, 3417, 3419, 3421, 3424, 3426,
    3428, 3430, 3433, 3435, 3437, 3439, 3442, 3444, 3446, 3448, 3450, 3453, 3455, 3457, 3459, 3462,
    3464, 3466, 3468, 3470, 3473, 3475, 3477, 3479, 3482, 3484, 3486, 3488, 3490, 3493, 3495, 3497,
    3499, 3502, 3504, 3506, 3508, 3511, 3513, 3515, 3517, 3519, 3522, 3524, 3526, 3528, 3531, 3533,
    3535, 3537, 3539, 3542, 3544, 3546, 3548, 3551, 3553, 3555, 3557, 3559, 3562, 3564, 3566, 3568,
    3571, 3573, 3575, 3577, 3580, 3582, 3584, 3586, 3588, 3591, 3593, 3595, 3597, 3600, 3602, 3604,
    3606, 3608, 3611, 3613, 3615, 3617, 3620, 3622, 3624, 3626, 3629, 3631, 3633, 3635, 3637, 3640,
    3642, 3644, 3646, 3649, 3651, 3653, 3655, 3657, 3660, 3662, 3664, 3666, 3669, 3671, 3673, 3675,
    3677, 3680, 3682, 3684, 3686, 3689, 3691, 3693, 3695, 3698, 3700, 3702, 3704, 3706, 3709, 3711,
    3713, 3715, 3718, 3720,
};
extern const uint16_t triangle_wave[836] = {
    1861, 1865, 1870, 1874, 1879, 1883, 1888, 1892, 1897, 1901, 1906, 1910, 1914, 1919, 1923, 1928,
    1932, 1937, 1941, 1946, 1950, 1954, 1959, 1963, 1968, 1972, 1977, 1981, 1986, 1990, 1995, 1999,
    2003, 2008, 2012, 2017, 2021, 2026, 2030, 2035, 2039, 2044, 2048, 2052, 2057, 2061, 2066, 2070,
    2075, 2079, 2084, 2088, 2093, 2097, 2101, 2106, 2110, 2115, 2119, 2124, 2128, 2133, 2137, 2141,
    2146, 2150, 2155, 2159, 2164, 2168, 2173, 2177, 2182, 2186, 2190, 2195, 2199, 2204, 2208, 2213,
    2217, 2222, 2226, 2231, 2235, 2239, 2244, 2248, 2253, 2257, 2262, 2266, 2271, 2275, 2280, 2284,
    2288, 2293, 2297, 2302, 2306, 2311, 2315, 2320, 2324, 2328, 2333, 2337, 2342, 2346, 2351, 2355,
    2360, 2364, 2369, 2373, 2377, 2382, 2386, 2391, 2395, 2400, 2404, 2409, 2413, 2418, 2422, 2426,
    2431, 2435, 2440, 2444, 2449, 2453, 2458, 2462, 2466, 2471, 2475, 2480, 2484, 2489, 2493, 2498,
    2502, 2507, 2511, 2515, 2520, 2524, 2529, 2533, 2538, 2542, 2547, 2551, 2556, 2560, 2564, 2569,
    2573, 2578, 2582, 2587, 2591, 2596, 2600, 2605, 2609, 2613, 2618, 2622, 2627, 2631, 2636, 2640,
    2645, 2649, 2653, 2658, 2662, 2667, 2671, 2676, 2680, 2685, 2689, 2694, 2698, 2702, 2707, 2711,
    2716, 2720, 2725, 2729, 2734, 2738, 2743, 2747, 2751, 2756, 2760, 2765, 2769, 2774, 2778, 2783,
    2787, 2792, 2796, 2800, 2805, 2809, 2814, 2818, 2823, 2827, 2832, 2836, 2840, 2845, 2849, 2854,
    2858, 2863, 2867, 2872, 2876, 2881, 2885, 2889, 2894, 2898, 2903, 2907, 2912, 2916, 2921, 2925,
    2930, 2934, 2938, 2943, 2947, 2952, 2956, 2961, 2965, 2970, 2974, 2978, 2983, 2987, 2992, 2996,
    3001, 3005, 3010, 3014, 3019, 3023, 3027, 3032, 3036, 3041, 3045, 3050, 3054, 3059, 3063, 3068,
    3072, 3076, 3081, 3085, 3090, 3094, 3099, 3103, 3108, 3112, 3117, 3121, 3125, 3130, 3134, 3139,
    3143, 3148, 3152, 3157, 3161, 3165, 3170, 3174, 3179, 3183, 3188, 3192, 3197, 3201, 3206, 3210,
    3214, 3219, 3223, 3228, 3232, 3237, 3241, 3246, 3250, 3255, 3259, 3263, 3268, 3272, 3277, 3281,
    3286, 3290, 3295, 3299, 3303, 3308, 3312, 3317, 3321, 3326, 3330, 3335, 3339, 3344, 3348, 3352,
    3357, 3361, 3366, 3370, 3375, 3379, 3384, 3388, 3393, 3397, 3401, 3406, 3410, 3415, 3419, 3424,
    3428, 3433, 3437, 3442, 3446, 3450, 3455, 3459, 3464, 3468, 3473, 3477, 3482, 3486, 3490, 3495,
    3499, 3504, 3508, 3513, 3517, 3522, 3526, 3531, 3535, 3539, 3544, 3548, 3553, 3557, 3562, 3566,
    3571, 3575, 3580, 3584, 3588, 3593, 3597, 3602, 3606, 3611, 3615, 3620, 3624, 3629, 3633, 3637,
    3642, 3646, 3651, 3655, 3660, 3664, 3669, 3673, 3677, 3682, 3686, 3691, 3695, 3700, 3704, 3709,
    3713, 3718, 3722, 3718, 3713, 3709, 3704, 3700, 3695, 3691, 3686, 3682, 3677, 3673, 3669, 3664,
    3660, 3655, 3651, 3646, 3642, 3637, 3633, 3629, 3624, 3620, 3615, 3611, 3606, 3602, 3597, 3593,
    3588, 3584, 3580, 3575, 3571, 3566, 3562, 3557, 3553, 3548, 3544, 3539, 3535, 3531, 3526, 3522,
    3517, 3513, 3508, 3504, 3499, 3495, 3490, 3486, 3482, 3477, 3473, 3468, 3464, 3459, 3455, 3450,
    3446, 3442, 3437, 3433, 3428, 3424, 3419, 3415, 3410, 3406, 3401, 3397, 3393, 3388, 3384, 3379,
    3375, 3370, 3366, 3361, 3357, 3352, 3348, 3344, 3339, 3335, 3330, 3326, 3321, 3317, 3312, 3308,
    3303, 3299, 3295, 3290, 3286, 3281, 3277, 3272, 3268, 3263, 3259, 3255, 3250, 3246, 3241, 3237,
    3232, 3228, 3223, 3219, 3214, 3210, 3206, 3201, 3197, 3192, 3188, 3183, 3179, 3174, 3170, 3165,
    3161, 3157, 3152, 3148, 3143, 3139, 3134, 3130, 3125, 3121, 3117, 3112, 3108, 3103, 3099, 3094,
    3090, 3085, 3081, 3076, 3072, 3068, 3063, 3059, 3054, 3050, 3045, 3041, 3036, 3032, 3027, 3023,
    3019, 3014, 3010, 3005, 3001, 2996, 2992, 2987, 2983, 2978, 2974, 2970, 2965, 2961, 2956, 2952,
    2947, 2943, 2938, 2934, 2930, 2925, 2921, 2916, 2912, 2907, 2903, 2898, 2894, 2889, 2885, 2881,
    2876, 2872, 2867, 2863, 2858, 2854, 2849, 2845, 2840, 2836, 2832, 2827, 2823, 2818, 2814, 2809,
    2805, 2800, 2796, 2792, 2787, 2783, 2778, 2774, 2769, 2765, 2760, 2756, 2751, 2747, 2743, 2738,
    2734, 2729, 2725, 2720, 2716, 2711, 2707, 2702, 2698, 2694, 2689, 2685, 2680, 2676, 2671, 2667,
    2662, 2658, 2653, 2649, 2645, 2640, 2636, 2631, 2627, 2622, 2618, 2613, 2609, 2605, 2600, 2596,
    2591, 2587, 2582, 2578, 2573, 2569, 2564, 2560, 2556, 2551, 2547, 2542, 2538, 2533, 2529, 2524,
    2520, 2515, 2511, 2507, 2502, 2498, 2493, 2489, 2484, 2480, 2475, 2471, 2466, 2462, 2458, 2453,
    2449, 2444, 2440, 2435, 2431, 2426, 2422, 2418, 2413, 2409, 2404, 2400, 2395, 2391, 2386, 2382,
    2377, 2373, 2369, 2364, 2360, 2355, 2351, 2346, 2342, 2337, 2333, 2328, 2324, 2320, 2315, 2311,
    2306, 2302, 2297, 2293, 2288, 2284, 2280, 2275, 2271, 2266, 2262, 2257, 2253, 2248, 2244, 2239,
    2235, 2231, 2226, 2222, 2217, 2213, 2208, 2204, 2199, 2195, 2190, 2186, 2182, 2177, 2173, 2168,
    2164, 2159, 2155, 2150, 2146, 2141, 2137, 2133, 2128, 2124, 2119, 2115, 2110, 2106, 2101, 2097,
    2093, 2088, 2084, 2079, 2075, 2070, 2066, 2061, 2057, 2052, 2048, 2044, 2039, 2035, 2030, 2026,
    2021, 2017, 2012, 2008, 2003, 1999, 1995, 1990, 1986, 1981, 1977, 1972, 1968, 1963, 1959, 1954,
    1950, 1946, 1941, 1937, 1932, 1928, 1923, 1919, 1914, 1910, 1906, 1901, 1897, 1892, 1888, 1883,
    1879, 1874, 1870, 1865,
};
External_DAC::External_DAC() {

}

External_DAC::~External_DAC() {
}

void External_DAC::DAC_init(void)
{
    RCC->AHB2ENR |= RCC_AHB2ENR_GPIOAEN;
    GPIOA->MODER &= ~(GPIO_MODER_MODE4 | GPIO_MODER_MODE5 | GPIO_MODER_MODE6 | GPIO_MODER_MODE7);
    GPIOA->MODER |= (GPIO_MODER_MODE4_1 | GPIO_MODER_MODE5_1 | GPIO_MODER_MODE6_1 | GPIO_MODER_MODE7_1);
    GPIOA->AFR[0] &= ~(GPIO_AFRL_AFSEL4 | GPIO_AFRL_AFSEL5 | GPIO_AFRL_AFSEL6 | GPIO_AFRL_AFSEL7);
    GPIOA->AFR[0] |= ((5 << GPIO_AFRL_AFSEL4_Pos) | (5 << GPIO_AFRL_AFSEL5_Pos) | (5 << GPIO_AFRL_AFSEL6_Pos) | (5 << GPIO_AFRL_AFSEL7_Pos));
    GPIOA->OTYPER &= ~(GPIO_OTYPER_OT4 | GPIO_OTYPER_OT5 | GPIO_OTYPER_OT6 | GPIO_OTYPER_OT7);
    GPIOA->PUPDR &= ~(GPIO_PUPDR_PUPD4 | GPIO_PUPDR_PUPD5 | GPIO_PUPDR_PUPD6 | GPIO_PUPDR_PUPD7);
    RCC->APB2ENR |= RCC_APB2ENR_SPI1EN;
    SPI1->CR1 = SPI_CR1_MSTR | SPI_CR1_BR_1;  // Set prescaler to fPCLK/4
    SPI1->CR2 = SPI_CR2_SSOE | SPI_CR2_NSSP | (0xF << SPI_CR2_DS_Pos);
    SPI1->CR1 |= SPI_CR1_SPE;
}

// Convert a voltage value into a 12-bit value to control the DAC
uint16_t External_DAC::DAC_mvolt_convert(float mvoltage)
{
	return (mvoltage * 4095) / 3300;
}

void External_DAC::DAC_write(uint16_t value_A, uint16_t value_B)
//void External_DAC::DAC_write(uint16_t value_A)
{
    uint16_t spi_data_A = (value_A & 0x0FFF) | 0x3000;  // For DACA
    uint16_t spi_data_B = (value_B & 0x0FFF) | 0xB000;  // For DACB

    // Write to DACA
    while(!(SPI1->SR & SPI_SR_TXE));
    SPI1->DR = spi_data_A;

    // Write to DACB
    while(!(SPI1->SR & SPI_SR_TXE));
    SPI1->DR = spi_data_B;
}


/* Matlab script for generating lookup tables
% Parameters
fs = 256;  % Sampling frequency
t = 0:1/fs:1-1/fs;  % Time vector
Vref = 3.3;  % Reference voltage
bit_depth = 4095;  % 12-bit DAC
dc_offset = 1.5;  % DC offset in volts
Vpp = 3.0;  % Peak-to-peak voltage in volts

% Scaling factors
scale_factor = bit_depth / Vref;
dc_offset_scaled = round(dc_offset * scale_factor);
amplitude_scaled = round((Vpp / 2) * scale_factor);

% Generate Sine Wave
sine_wave = round(dc_offset_scaled + amplitude_scaled * sin(2 * pi * t));

% Generate Square Wave
square_wave = round(dc_offset_scaled + amplitude_scaled * (square(2 * pi * t) + 1) / 2);

% Generate Triangle Wave
triangle_wave = round(dc_offset_scaled + amplitude_scaled * (sawtooth(2 * pi * t, 0.5) + 1) / 2);

% Generate Sawtooth Wave
sawtooth_wave = round(dc_offset_scaled + amplitude_scaled * (sawtooth(2 * pi * t) + 1) / 2);

% Print Lookup Tables
print_lookup_table('sine_wave', sine_wave);
print_lookup_table('square_wave', square_wave);
print_lookup_table('sawtooth_wave', sawtooth_wave);
print_lookup_table('triangle_wave', triangle_wave);

% Function to print lookup table in 16x16 format
function print_lookup_table(name, data)
    fprintf('extern const uint16_t %s[%d] = {\n', name, length(data));
    for i = 1:16:length(data)
        fprintf('    ');
        fprintf('%d, ', data(i:min(i+15, end)));
        fprintf('\n');
    end
    fprintf('};\n');
end
 */




