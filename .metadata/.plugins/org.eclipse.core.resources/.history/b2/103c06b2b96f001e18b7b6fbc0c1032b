#include "ExternalDAC.h"

extern const uint16_t sine_wave[876] = {
    1862, 1875, 1888, 1902, 1915, 1928, 1942, 1955, 1968, 1982, 1995, 2008, 2022, 2035, 2048, 2061,
    2075, 2088, 2101, 2114, 2128, 2141, 2154, 2167, 2180, 2194, 2207, 2220, 2233, 2246, 2259, 2272,
    2285, 2298, 2311, 2324, 2337, 2350, 2363, 2375, 2388, 2401, 2414, 2427, 2439, 2452, 2465, 2477,
    2490, 2502, 2515, 2527, 2540, 2552, 2565, 2577, 2589, 2602, 2614, 2626, 2638, 2650, 2662, 2674,
    2686, 2698, 2710, 2722, 2734, 2746, 2757, 2769, 2781, 2792, 2804, 2815, 2827, 2838, 2849, 2861,
    2872, 2883, 2894, 2905, 2916, 2927, 2938, 2949, 2960, 2971, 2981, 2992, 3003, 3013, 3024, 3034,
    3044, 3055, 3065, 3075, 3085, 3095, 3105, 3115, 3125, 3135, 3144, 3154, 3164, 3173, 3182, 3192,
    3201, 3210, 3220, 3229, 3238, 3247, 3256, 3264, 3273, 3282, 3290, 3299, 3307, 3316, 3324, 3332,
    3340, 3348, 3356, 3364, 3372, 3380, 3388, 3395, 3403, 3410, 3418, 3425, 3432, 3439, 3446, 3453,
    3460, 3467, 3474, 3480, 3487, 3493, 3500, 3506, 3512, 3518, 3524, 3530, 3536, 3542, 3548, 3553,
    3559, 3564, 3570, 3575, 3580, 3585, 3590, 3595, 3600, 3605, 3609, 3614, 3618, 3623, 3627, 3631,
    3635, 3639, 3643, 3647, 3651, 3654, 3658, 3661, 3665, 3668, 3671, 3674, 3677, 3680, 3683, 3686,
    3688, 3691, 3693, 3695, 3698, 3700, 3702, 3704, 3706, 3708, 3709, 3711, 3712, 3714, 3715, 3716,
    3717, 3718, 3719, 3720, 3721, 3721, 3722, 3722, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3722,
    3722, 3721, 3721, 3720, 3719, 3718, 3717, 3716, 3715, 3714, 3712, 3711, 3709, 3708, 3706, 3704,
    3702, 3700, 3698, 3695, 3693, 3691, 3688, 3686, 3683, 3680, 3677, 3674, 3671, 3668, 3665, 3661,
    3658, 3654, 3651, 3647, 3643, 3639, 3635, 3631, 3627, 3623, 3618, 3614, 3609, 3605, 3600, 3595,
    3590, 3585, 3580, 3575, 3570, 3564, 3559, 3553, 3548, 3542, 3536, 3530, 3524, 3518, 3512, 3506,
    3500, 3493, 3487, 3480, 3474, 3467, 3460, 3453, 3446, 3439, 3432, 3425, 3418, 3410, 3403, 3395,
    3388, 3380, 3372, 3364, 3356, 3348, 3340, 3332, 3324, 3316, 3307, 3299, 3290, 3282, 3273, 3264,
    3256, 3247, 3238, 3229, 3220, 3210, 3201, 3192, 3182, 3173, 3164, 3154, 3144, 3135, 3125, 3115,
    3105, 3095, 3085, 3075, 3065, 3055, 3044, 3034, 3024, 3013, 3003, 2992, 2981, 2971, 2960, 2949,
    2938, 2927, 2916, 2905, 2894, 2883, 2872, 2861, 2849, 2838, 2827, 2815, 2804, 2792, 2781, 2769,
    2757, 2746, 2734, 2722, 2710, 2698, 2686, 2674, 2662, 2650, 2638, 2626, 2614, 2602, 2589, 2577,
    2565, 2552, 2540, 2527, 2515, 2502, 2490, 2477, 2465, 2452, 2439, 2427, 2414, 2401, 2388, 2375,
    2363, 2350, 2337, 2324, 2311, 2298, 2285, 2272, 2259, 2246, 2233, 2220, 2207, 2194, 2180, 2167,
    2154, 2141, 2128, 2114, 2101, 2088, 2075, 2061, 2048, 2035, 2022, 2008, 1995, 1982, 1968, 1955,
    1942, 1928, 1915, 1902, 1888, 1875, 1862, 1848, 1835, 1821, 1808, 1795, 1781, 1768, 1755, 1741,
    1728, 1715, 1701, 1688, 1675, 1662, 1648, 1635, 1622, 1609, 1595, 1582, 1569, 1556, 1543, 1529,
    1516, 1503, 1490, 1477, 1464, 1451, 1438, 1425, 1412, 1399, 1386, 1373, 1360, 1348, 1335, 1322,
    1309, 1296, 1284, 1271, 1258, 1246, 1233, 1221, 1208, 1196, 1183, 1171, 1158, 1146, 1134, 1121,
    1109, 1097, 1085, 1073, 1061, 1049, 1037, 1025, 1013, 1001, 989, 977, 966, 954, 942, 931,
    919, 908, 896, 885, 874, 862, 851, 840, 829, 818, 807, 796, 785, 774, 763, 752,
    742, 731, 720, 710, 699, 689, 679, 668, 658, 648, 638, 628, 618, 608, 598, 588,
    579, 569, 559, 550, 541, 531, 522, 513, 503, 494, 485, 476, 467, 459, 450, 441,
    433, 424, 416, 407, 399, 391, 383, 375, 367, 359, 351, 343, 335, 328, 320, 313,
    305, 298, 291, 284, 277, 270, 263, 256, 249, 243, 236, 230, 223, 217, 211, 205,
    199, 193, 187, 181, 175, 170, 164, 159, 153, 148, 143, 138, 133, 128, 123, 118,
    114, 109, 105, 100, 96, 92, 88, 84, 80, 76, 72, 69, 65, 62, 58, 55,
    52, 49, 46, 43, 40, 37, 35, 32, 30, 28, 25, 23, 21, 19, 17, 15,
    14, 12, 11, 9, 8, 7, 6, 5, 4, 3, 2, 2, 1, 1, 0, 0,
    0, 0, 0, 0, 0, 1, 1, 2, 2, 3, 4, 5, 6, 7, 8, 9,
    11, 12, 14, 15, 17, 19, 21, 23, 25, 28, 30, 32, 35, 37, 40, 43,
    46, 49, 52, 55, 58, 62, 65, 69, 72, 76, 80, 84, 88, 92, 96, 100,
    105, 109, 114, 118, 123, 128, 133, 138, 143, 148, 153, 159, 164, 170, 175, 181,
    187, 193, 199, 205, 211, 217, 223, 230, 236, 243, 249, 256, 263, 270, 277, 284,
    291, 298, 305, 313, 320, 328, 335, 343, 351, 359, 367, 375, 383, 391, 399, 407,
    416, 424, 433, 441, 450, 459, 467, 476, 485, 494, 503, 513, 522, 531, 541, 550,
    559, 569, 579, 588, 598, 608, 618, 628, 638, 648, 658, 668, 679, 689, 699, 710,
    720, 731, 742, 752, 763, 774, 785, 796, 807, 818, 829, 840, 851, 862, 874, 885,
    896, 908, 919, 931, 942, 954, 966, 977, 989, 1001, 1013, 1025, 1037, 1049, 1061, 1073,
    1085, 1097, 1109, 1121, 1134, 1146, 1158, 1171, 1183, 1196, 1208, 1221, 1233, 1246, 1258, 1271,
    1284, 1296, 1309, 1322, 1335, 1348, 1360, 1373, 1386, 1399, 1412, 1425, 1438, 1451, 1464, 1477,
    1490, 1503, 1516, 1529, 1543, 1556, 1569, 1582, 1595, 1609, 1622, 1635, 1648, 1662, 1675, 1688,
    1701, 1715, 1728, 1741, 1755, 1768, 1781, 1795, 1808, 1821, 1835, 1848,
};
extern const uint16_t square_wave[876] = {
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723, 3723,
    3723, 3723, 3723, 3723, 3723, 3723, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
};
extern const uint16_t sawtooth_wave[876] = {
    0, 4, 8, 13, 17, 21, 26, 30, 34, 38, 42, 47, 51, 55, 60, 64,
    68, 72, 76, 81, 85, 89, 94, 98, 102, 106, 110, 115, 119, 123, 128, 132,
    136, 140, 144, 149, 153, 157, 162, 166, 170, 174, 178, 183, 187, 191, 196, 200,
    204, 208, 212, 217, 221, 225, 230, 234, 238, 242, 246, 251, 255, 259, 264, 268,
    272, 276, 280, 285, 289, 293, 298, 302, 306, 310, 314, 319, 323, 327, 332, 336,
    340, 344, 348, 353, 357, 361, 366, 370, 374, 378, 382, 387, 391, 395, 400, 404,
    408, 412, 416, 421, 425, 429, 434, 438, 442, 446, 450, 455, 459, 463, 468, 472,
    476, 480, 484, 489, 493, 497, 502, 506, 510, 514, 518, 523, 527, 531, 536, 540,
    544, 548, 552, 557, 561, 565, 570, 574, 578, 582, 586, 591, 595, 599, 604, 608,
    612, 616, 620, 625, 629, 633, 638, 642, 646, 650, 654, 659, 663, 667, 672, 676,
    680, 684, 688, 693, 697, 701, 706, 710, 714, 718, 722, 727, 731, 735, 740, 744,
    748, 752, 756, 761, 765, 769, 774, 778, 782, 786, 791, 795, 799, 803, 808, 812,
    816, 820, 824, 829, 833, 837, 842, 846, 850, 854, 858, 863, 867, 871, 876, 880,
    884, 888, 893, 897, 901, 905, 910, 914, 918, 922, 926, 931, 935, 939, 944, 948,
    952, 956, 960, 965, 969, 973, 978, 982, 986, 990, 994, 999, 1003, 1007, 1012, 1016,
    1020, 1024, 1028, 1033, 1037, 1041, 1046, 1050, 1054, 1058, 1062, 1067, 1071, 1075, 1080, 1084,
    1088, 1092, 1096, 1101, 1105, 1109, 1114, 1118, 1122, 1126, 1130, 1135, 1139, 1143, 1148, 1152,
    1156, 1160, 1164, 1169, 1173, 1177, 1182, 1186, 1190, 1194, 1198, 1203, 1207, 1211, 1216, 1220,
    1224, 1228, 1232, 1237, 1241, 1245, 1250, 1254, 1258, 1262, 1267, 1271, 1275, 1279, 1284, 1288,
    1292, 1296, 1300, 1305, 1309, 1313, 1318, 1322, 1326, 1330, 1334, 1339, 1343, 1347, 1352, 1356,
    1360, 1364, 1369, 1373, 1377, 1381, 1386, 1390, 1394, 1398, 1402, 1407, 1411, 1415, 1420, 1424,
    1428, 1432, 1436, 1441, 1445, 1449, 1454, 1458, 1462, 1466, 1470, 1475, 1479, 1483, 1488, 1492,
    1496, 1500, 1504, 1509, 1513, 1517, 1522, 1526, 1530, 1534, 1538, 1543, 1547, 1551, 1556, 1560,
    1564, 1568, 1572, 1577, 1581, 1585, 1590, 1594, 1598, 1602, 1606, 1611, 1615, 1619, 1624, 1628,
    1632, 1636, 1640, 1645, 1649, 1653, 1658, 1662, 1666, 1670, 1674, 1679, 1683, 1687, 1692, 1696,
    1700, 1704, 1708, 1713, 1717, 1721, 1726, 1730, 1734, 1738, 1743, 1747, 1751, 1755, 1760, 1764,
    1768, 1772, 1776, 1781, 1785, 1789, 1794, 1798, 1802, 1806, 1810, 1815, 1819, 1823, 1828, 1832,
    1836, 1840, 1845, 1849, 1853, 1857, 1862, 1866, 1870, 1874, 1878, 1883, 1887, 1891, 1896, 1900,
    1904, 1908, 1913, 1917, 1921, 1925, 1930, 1934, 1938, 1942, 1946, 1951, 1955, 1959, 1964, 1968,
    1972, 1976, 1981, 1985, 1989, 1993, 1998, 2002, 2006, 2010, 2014, 2019, 2023, 2027, 2032, 2036,
    2040, 2044, 2049, 2053, 2057, 2061, 2066, 2070, 2074, 2078, 2083, 2087, 2091, 2095, 2100, 2104,
    2108, 2112, 2117, 2121, 2125, 2129, 2134, 2138, 2142, 2146, 2151, 2155, 2159, 2163, 2168, 2172,
    2176, 2180, 2185, 2189, 2193, 2197, 2202, 2206, 2210, 2214, 2219, 2223, 2227, 2231, 2236, 2240,
    2244, 2248, 2253, 2257, 2261, 2265, 2270, 2274, 2278, 2282, 2286, 2291, 2295, 2299, 2304, 2308,
    2312, 2316, 2321, 2325, 2329, 2333, 2338, 2342, 2346, 2350, 2354, 2359, 2363, 2367, 2372, 2376,
    2380, 2384, 2389, 2393, 2397, 2401, 2406, 2410, 2414, 2418, 2423, 2427, 2431, 2435, 2440, 2444,
    2448, 2452, 2457, 2461, 2465, 2469, 2474, 2478, 2482, 2486, 2490, 2495, 2499, 2503, 2508, 2512,
    2516, 2520, 2525, 2529, 2533, 2537, 2542, 2546, 2550, 2554, 2558, 2563, 2567, 2571, 2576, 2580,
    2584, 2588, 2593, 2597, 2601, 2605, 2610, 2614, 2618, 2622, 2626, 2631, 2635, 2639, 2644, 2648,
    2652, 2656, 2661, 2665, 2669, 2673, 2678, 2682, 2686, 2690, 2694, 2699, 2703, 2707, 2712, 2716,
    2720, 2724, 2729, 2733, 2737, 2741, 2746, 2750, 2754, 2758, 2762, 2767, 2771, 2775, 2780, 2784,
    2788, 2792, 2797, 2801, 2805, 2809, 2814, 2818, 2822, 2826, 2830, 2835, 2839, 2843, 2848, 2852,
    2856, 2860, 2865, 2869, 2873, 2877, 2882, 2886, 2890, 2894, 2898, 2903, 2907, 2911, 2916, 2920,
    2924, 2928, 2933, 2937, 2941, 2945, 2950, 2954, 2958, 2962, 2966, 2971, 2975, 2979, 2984, 2988,
    2992, 2996, 3001, 3005, 3009, 3013, 3018, 3022, 3026, 3030, 3034, 3039, 3043, 3047, 3052, 3056,
    3060, 3064, 3069, 3073, 3077, 3081, 3086, 3090, 3094, 3098, 3102, 3107, 3111, 3115, 3120, 3124,
    3128, 3132, 3137, 3141, 3145, 3149, 3154, 3158, 3162, 3166, 3170, 3175, 3179, 3183, 3188, 3192,
    3196, 3200, 3205, 3209, 3213, 3217, 3222, 3226, 3230, 3234, 3238, 3243, 3247, 3251, 3256, 3260,
    3264, 3268, 3273, 3277, 3281, 3285, 3290, 3294, 3298, 3302, 3306, 3311, 3315, 3319, 3324, 3328,
    3332, 3336, 3340, 3345, 3349, 3353, 3358, 3362, 3366, 3370, 3375, 3379, 3383, 3387, 3392, 3396,
    3400, 3404, 3408, 3413, 3417, 3421, 3426, 3430, 3434, 3438, 3442, 3447, 3451, 3455, 3460, 3464,
    3468, 3472, 3477, 3481, 3485, 3489, 3494, 3498, 3502, 3506, 3510, 3515, 3519, 3523, 3528, 3532,
    3536, 3540, 3544, 3549, 3553, 3557, 3562, 3566, 3570, 3574, 3579, 3583, 3587, 3591, 3596, 3600,
    3604, 3608, 3612, 3617, 3621, 3625, 3630, 3634, 3638, 3642, 3646, 3651, 3655, 3659, 3664, 3668,
    3672, 3676, 3681, 3685, 3689, 3693, 3698, 3702, 3706, 3710, 3714, 3719,
};
extern const uint16_t triangle_wave[876] = {
    0, 8, 17, 26, 34, 42, 51, 60, 68, 76, 85, 94, 102, 110, 119, 128,
    136, 144, 153, 162, 170, 178, 187, 196, 204, 212, 221, 230, 238, 246, 255, 264,
    272, 280, 289, 298, 306, 314, 323, 332, 340, 348, 357, 366, 374, 382, 391, 400,
    408, 416, 425, 434, 442, 450, 459, 468, 476, 484, 493, 502, 510, 518, 527, 536,
    544, 552, 561, 570, 578, 586, 595, 604, 612, 620, 629, 638, 646, 654, 663, 672,
    680, 688, 697, 706, 714, 722, 731, 740, 748, 756, 765, 774, 782, 791, 799, 808,
    816, 824, 833, 842, 850, 858, 867, 876, 884, 893, 901, 910, 918, 926, 935, 944,
    952, 960, 969, 978, 986, 994, 1003, 1012, 1020, 1028, 1037, 1046, 1054, 1062, 1071, 1080,
    1088, 1096, 1105, 1114, 1122, 1130, 1139, 1148, 1156, 1164, 1173, 1182, 1190, 1198, 1207, 1216,
    1224, 1232, 1241, 1250, 1258, 1267, 1275, 1284, 1292, 1300, 1309, 1318, 1326, 1334, 1343, 1352,
    1360, 1369, 1377, 1386, 1394, 1402, 1411, 1420, 1428, 1436, 1445, 1454, 1462, 1470, 1479, 1488,
    1496, 1504, 1513, 1522, 1530, 1538, 1547, 1556, 1564, 1572, 1581, 1590, 1598, 1606, 1615, 1624,
    1632, 1640, 1649, 1658, 1666, 1674, 1683, 1692, 1700, 1708, 1717, 1726, 1734, 1743, 1751, 1760,
    1768, 1776, 1785, 1794, 1802, 1810, 1819, 1828, 1836, 1845, 1853, 1862, 1870, 1878, 1887, 1896,
    1904, 1912, 1921, 1930, 1938, 1946, 1955, 1964, 1972, 1980, 1989, 1998, 2006, 2014, 2023, 2032,
    2040, 2049, 2057, 2066, 2074, 2083, 2091, 2100, 2108, 2117, 2125, 2134, 2142, 2151, 2159, 2168,
    2176, 2185, 2193, 2202, 2210, 2219, 2227, 2236, 2244, 2252, 2261, 2270, 2278, 2286, 2295, 2304,
    2312, 2320, 2329, 2338, 2346, 2354, 2363, 2372, 2380, 2388, 2397, 2406, 2414, 2423, 2431, 2440,
    2448, 2456, 2465, 2474, 2482, 2490, 2499, 2508, 2516, 2525, 2533, 2542, 2550, 2558, 2567, 2576,
    2584, 2592, 2601, 2610, 2618, 2626, 2635, 2644, 2652, 2660, 2669, 2678, 2686, 2694, 2703, 2712,
    2720, 2728, 2737, 2746, 2754, 2762, 2771, 2780, 2788, 2796, 2805, 2814, 2822, 2830, 2839, 2848,
    2856, 2864, 2873, 2882, 2890, 2898, 2907, 2916, 2924, 2932, 2941, 2950, 2958, 2966, 2975, 2984,
    2992, 3000, 3009, 3018, 3026, 3034, 3043, 3052, 3060, 3068, 3077, 3086, 3094, 3102, 3111, 3120,
    3128, 3136, 3145, 3154, 3162, 3170, 3179, 3188, 3196, 3204, 3213, 3222, 3230, 3238, 3247, 3256,
    3264, 3273, 3281, 3290, 3298, 3306, 3315, 3324, 3332, 3340, 3349, 3358, 3366, 3375, 3383, 3392,
    3400, 3408, 3417, 3426, 3434, 3442, 3451, 3460, 3468, 3477, 3485, 3494, 3502, 3510, 3519, 3528,
    3536, 3544, 3553, 3562, 3570, 3579, 3587, 3596, 3604, 3612, 3621, 3630, 3638, 3646, 3655, 3664,
    3672, 3681, 3689, 3698, 3706, 3714, 3723, 3714, 3706, 3698, 3689, 3681, 3672, 3664, 3655, 3647,
    3638, 3630, 3621, 3613, 3604, 3596, 3587, 3578, 3570, 3562, 3553, 3545, 3536, 3528, 3519, 3511,
    3502, 3494, 3485, 3477, 3468, 3460, 3451, 3442, 3434, 3426, 3417, 3409, 3400, 3392, 3383, 3375,
    3366, 3358, 3349, 3341, 3332, 3324, 3315, 3306, 3298, 3290, 3281, 3273, 3264, 3256, 3247, 3239,
    3230, 3222, 3213, 3205, 3196, 3188, 3179, 3170, 3162, 3154, 3145, 3137, 3128, 3120, 3111, 3103,
    3094, 3086, 3077, 3069, 3060, 3052, 3043, 3034, 3026, 3018, 3009, 3001, 2992, 2984, 2975, 2967,
    2958, 2950, 2941, 2933, 2924, 2916, 2907, 2898, 2890, 2882, 2873, 2865, 2856, 2848, 2839, 2831,
    2822, 2814, 2805, 2797, 2788, 2780, 2771, 2762, 2754, 2746, 2737, 2729, 2720, 2712, 2703, 2695,
    2686, 2678, 2669, 2661, 2652, 2644, 2635, 2626, 2618, 2609, 2601, 2592, 2584, 2575, 2567, 2558,
    2550, 2542, 2533, 2525, 2516, 2508, 2499, 2490, 2482, 2474, 2465, 2457, 2448, 2440, 2431, 2423,
    2414, 2405, 2397, 2388, 2380, 2371, 2363, 2354, 2346, 2338, 2329, 2321, 2312, 2304, 2295, 2287,
    2278, 2270, 2261, 2253, 2244, 2236, 2227, 2218, 2210, 2201, 2193, 2184, 2176, 2167, 2159, 2151,
    2142, 2134, 2125, 2117, 2108, 2100, 2091, 2083, 2074, 2066, 2057, 2049, 2040, 2032, 2023, 2015,
    2006, 1997, 1989, 1980, 1972, 1963, 1955, 1946, 1938, 1930, 1921, 1913, 1904, 1896, 1887, 1879,
    1870, 1862, 1853, 1845, 1836, 1828, 1819, 1810, 1802, 1793, 1785, 1776, 1768, 1759, 1751, 1742,
    1734, 1726, 1717, 1709, 1700, 1692, 1683, 1674, 1666, 1658, 1649, 1641, 1632, 1624, 1615, 1607,
    1598, 1589, 1581, 1572, 1564, 1555, 1547, 1538, 1530, 1522, 1513, 1505, 1496, 1488, 1479, 1471,
    1462, 1454, 1445, 1437, 1428, 1420, 1411, 1402, 1394, 1385, 1377, 1368, 1360, 1351, 1343, 1334,
    1326, 1318, 1309, 1301, 1292, 1284, 1275, 1266, 1258, 1250, 1241, 1233, 1224, 1216, 1207, 1199,
    1190, 1181, 1173, 1164, 1156, 1147, 1139, 1130, 1122, 1114, 1105, 1097, 1088, 1080, 1071, 1063,
    1054, 1046, 1037, 1029, 1020, 1012, 1003, 994, 986, 977, 969, 960, 952, 943, 935, 926,
    918, 910, 901, 893, 884, 876, 867, 858, 850, 842, 833, 825, 816, 808, 799, 791,
    782, 774, 765, 756, 748, 739, 731, 722, 714, 706, 697, 689, 680, 672, 663, 655,
    646, 638, 629, 621, 612, 604, 595, 586, 578, 570, 561, 552, 544, 535, 527, 518,
    510, 502, 493, 485, 476, 468, 459, 450, 442, 434, 425, 417, 408, 400, 391, 383,
    374, 366, 357, 348, 340, 331, 323, 314, 306, 298, 289, 281, 272, 264, 255, 247,
    238, 230, 221, 213, 204, 196, 187, 178, 170, 162, 153, 145, 136, 127, 119, 110,
    102, 94, 85, 77, 68, 60, 51, 42, 34, 26, 17, 9,
};
External_DAC::External_DAC() {

}

External_DAC::~External_DAC() {
}

void External_DAC::DAC_init(void)
{
    RCC->AHB2ENR |= RCC_AHB2ENR_GPIOAEN;
    GPIOA->MODER &= ~(GPIO_MODER_MODE4 | GPIO_MODER_MODE5 | GPIO_MODER_MODE6 | GPIO_MODER_MODE7);
    GPIOA->MODER |= (GPIO_MODER_MODE4_1 | GPIO_MODER_MODE5_1 | GPIO_MODER_MODE6_1 | GPIO_MODER_MODE7_1);
    GPIOA->AFR[0] &= ~(GPIO_AFRL_AFSEL4 | GPIO_AFRL_AFSEL5 | GPIO_AFRL_AFSEL6 | GPIO_AFRL_AFSEL7);
    GPIOA->AFR[0] |= ((5 << GPIO_AFRL_AFSEL4_Pos) | (5 << GPIO_AFRL_AFSEL5_Pos) | (5 << GPIO_AFRL_AFSEL6_Pos) | (5 << GPIO_AFRL_AFSEL7_Pos));
    GPIOA->OTYPER &= ~(GPIO_OTYPER_OT4 | GPIO_OTYPER_OT5 | GPIO_OTYPER_OT6 | GPIO_OTYPER_OT7);
    GPIOA->PUPDR &= ~(GPIO_PUPDR_PUPD4 | GPIO_PUPDR_PUPD5 | GPIO_PUPDR_PUPD6 | GPIO_PUPDR_PUPD7);
    RCC->APB2ENR |= RCC_APB2ENR_SPI1EN;
    SPI1->CR1 = SPI_CR1_MSTR | SPI_CR1_BR_1;  // Set prescaler to fPCLK/4
    SPI1->CR2 = SPI_CR2_SSOE | SPI_CR2_NSSP | (0xF << SPI_CR2_DS_Pos);
    SPI1->CR1 |= SPI_CR1_SPE;
}

// Convert a voltage value into a 12-bit value to control the DAC
uint16_t External_DAC::DAC_mvolt_convert(float mvoltage)
{
	return (mvoltage * 4095) / 3300;
}

void External_DAC::DAC_write(uint16_t value_A, uint16_t value_B)
//void External_DAC::DAC_write(uint16_t value_A)
{
    uint16_t spi_data_A = (value_A & 0x0FFF) | 0x3000;  // For DACA
    uint16_t spi_data_B = (value_B & 0x0FFF) | 0xB000;  // For DACB

    // Write to DACA
    while(!(SPI1->SR & SPI_SR_TXE));
    SPI1->DR = spi_data_A;

    // Write to DACB
    while(!(SPI1->SR & SPI_SR_TXE));
    SPI1->DR = spi_data_B;
}


/* Matlab script for generating lookup tables
% Parameters
fs = 256;  % Sampling frequency
t = 0:1/fs:1-1/fs;  % Time vector
Vref = 3.3;  % Reference voltage
bit_depth = 4095;  % 12-bit DAC
dc_offset = 1.5;  % DC offset in volts
Vpp = 3.0;  % Peak-to-peak voltage in volts

% Scaling factors
scale_factor = bit_depth / Vref;
dc_offset_scaled = round(dc_offset * scale_factor);
amplitude_scaled = round((Vpp / 2) * scale_factor);

% Generate Sine Wave
sine_wave = round(dc_offset_scaled + amplitude_scaled * sin(2 * pi * t));

% Generate Square Wave
square_wave = round(dc_offset_scaled + amplitude_scaled * (square(2 * pi * t) + 1) / 2);

% Generate Triangle Wave
triangle_wave = round(dc_offset_scaled + amplitude_scaled * (sawtooth(2 * pi * t, 0.5) + 1) / 2);

% Generate Sawtooth Wave
sawtooth_wave = round(dc_offset_scaled + amplitude_scaled * (sawtooth(2 * pi * t) + 1) / 2);

% Print Lookup Tables
print_lookup_table('sine_wave', sine_wave);
print_lookup_table('square_wave', square_wave);
print_lookup_table('sawtooth_wave', sawtooth_wave);
print_lookup_table('triangle_wave', triangle_wave);

% Function to print lookup table in 16x16 format
function print_lookup_table(name, data)
    fprintf('extern const uint16_t %s[%d] = {\n', name, length(data));
    for i = 1:16:length(data)
        fprintf('    ');
        fprintf('%d, ', data(i:min(i+15, end)));
        fprintf('\n');
    end
    fprintf('};\n');
end
 */




