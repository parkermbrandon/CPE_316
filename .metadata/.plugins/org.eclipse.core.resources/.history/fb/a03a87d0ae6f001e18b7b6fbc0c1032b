#include "ExternalDAC.h"

extern const uint16_t sine_wave[834] = {
    1875, 1889, 1903, 1917, 1931, 1945, 1959, 1973, 1987, 2001, 2015, 2029, 2043, 2057, 2071, 2085,
    2099, 2113, 2127, 2140, 2154, 2168, 2182, 2196, 2210, 2223, 2237, 2251, 2265, 2278, 2292, 2306,
    2319, 2333, 2346, 2360, 2374, 2387, 2401, 2414, 2427, 2441, 2454, 2467, 2481, 2494, 2507, 2520,
    2533, 2547, 2560, 2573, 2586, 2598, 2611, 2624, 2637, 2650, 2663, 2675, 2688, 2700, 2713, 2725,
    2738, 2750, 2763, 2775, 2787, 2799, 2812, 2824, 2836, 2848, 2860, 2871, 2883, 2895, 2907, 2918,
    2930, 2941, 2953, 2964, 2976, 2987, 2998, 3009, 3020, 3031, 3042, 3053, 3064, 3075, 3085, 3096,
    3107, 3117, 3128, 3138, 3148, 3158, 3168, 3178, 3188, 3198, 3208, 3218, 3228, 3237, 3247, 3256,
    3265, 3275, 3284, 3293, 3302, 3311, 3320, 3329, 3337, 3346, 3355, 3363, 3371, 3380, 3388, 3396,
    3404, 3412, 3420, 3428, 3435, 3443, 3450, 3458, 3465, 3472, 3480, 3487, 3494, 3501, 3507, 3514,
    3521, 3527, 3533, 3540, 3546, 3552, 3558, 3564, 3570, 3576, 3581, 3587, 3592, 3598, 3603, 3608,
    3613, 3618, 3623, 3628, 3632, 3637, 3641, 3646, 3650, 3654, 3658, 3662, 3666, 3670, 3673, 3677,
    3680, 3684, 3687, 3690, 3693, 3696, 3699, 3702, 3704, 3707, 3709, 3712, 3714, 3716, 3718, 3720,
    3722, 3723, 3725, 3726, 3728, 3729, 3730, 3731, 3732, 3733, 3734, 3734, 3735, 3735, 3736, 3736,
    3736, 3736, 3736, 3736, 3735, 3735, 3734, 3734, 3733, 3732, 3731, 3730, 3729, 3728, 3726, 3725,
    3723, 3722, 3720, 3718, 3716, 3714, 3712, 3709, 3707, 3704, 3702, 3699, 3696, 3693, 3690, 3687,
    3684, 3680, 3677, 3673, 3670, 3666, 3662, 3658, 3654, 3650, 3646, 3641, 3637, 3632, 3628, 3623,
    3618, 3613, 3608, 3603, 3598, 3592, 3587, 3581, 3576, 3570, 3564, 3558, 3552, 3546, 3540, 3533,
    3527, 3521, 3514, 3507, 3501, 3494, 3487, 3480, 3472, 3465, 3458, 3450, 3443, 3435, 3428, 3420,
    3412, 3404, 3396, 3388, 3380, 3371, 3363, 3355, 3346, 3337, 3329, 3320, 3311, 3302, 3293, 3284,
    3275, 3265, 3256, 3247, 3237, 3228, 3218, 3208, 3198, 3188, 3178, 3168, 3158, 3148, 3138, 3128,
    3117, 3107, 3096, 3085, 3075, 3064, 3053, 3042, 3031, 3020, 3009, 2998, 2987, 2976, 2964, 2953,
    2941, 2930, 2918, 2907, 2895, 2883, 2871, 2860, 2848, 2836, 2824, 2812, 2799, 2787, 2775, 2763,
    2750, 2738, 2725, 2713, 2700, 2688, 2675, 2663, 2650, 2637, 2624, 2611, 2598, 2586, 2573, 2560,
    2547, 2533, 2520, 2507, 2494, 2481, 2467, 2454, 2441, 2427, 2414, 2401, 2387, 2374, 2360, 2346,
    2333, 2319, 2306, 2292, 2278, 2265, 2251, 2237, 2223, 2210, 2196, 2182, 2168, 2154, 2140, 2127,
    2113, 2099, 2085, 2071, 2057, 2043, 2029, 2015, 2001, 1987, 1973, 1959, 1945, 1931, 1917, 1903,
    1889, 1875, 1861, 1847, 1833, 1819, 1805, 1791, 1777, 1763, 1749, 1735, 1721, 1707, 1693, 1679,
    1665, 1651, 1637, 1623, 1610, 1596, 1582, 1568, 1554, 1540, 1527, 1513, 1499, 1485, 1472, 1458,
    1444, 1431, 1417, 1404, 1390, 1376, 1363, 1349, 1336, 1323, 1309, 1296, 1283, 1269, 1256, 1243,
    1230, 1217, 1203, 1190, 1177, 1164, 1152, 1139, 1126, 1113, 1100, 1087, 1075, 1062, 1050, 1037,
    1025, 1012, 1000, 987, 975, 963, 951, 938, 926, 914, 902, 890, 879, 867, 855, 843,
    832, 820, 809, 797, 786, 774, 763, 752, 741, 730, 719, 708, 697, 686, 675, 665,
    654, 643, 633, 622, 612, 602, 592, 582, 572, 562, 552, 542, 532, 522, 513, 503,
    494, 485, 475, 466, 457, 448, 439, 430, 421, 413, 404, 395, 387, 379, 370, 362,
    354, 346, 338, 330, 322, 315, 307, 300, 292, 285, 278, 270, 263, 256, 249, 243,
    236, 229, 223, 217, 210, 204, 198, 192, 186, 180, 174, 169, 163, 158, 152, 147,
    142, 137, 132, 127, 122, 118, 113, 109, 104, 100, 96, 92, 88, 84, 80, 77,
    73, 70, 66, 63, 60, 57, 54, 51, 48, 46, 43, 41, 38, 36, 34, 32,
    30, 28, 27, 25, 24, 22, 21, 20, 19, 18, 17, 16, 16, 15, 15, 14,
    14, 14, 14, 14, 14, 15, 15, 16, 16, 17, 18, 19, 20, 21, 22, 24,
    25, 27, 28, 30, 32, 34, 36, 38, 41, 43, 46, 48, 51, 54, 57, 60,
    63, 66, 70, 73, 77, 80, 84, 88, 92, 96, 100, 104, 109, 113, 118, 122,
    127, 132, 137, 142, 147, 152, 158, 163, 169, 174, 180, 186, 192, 198, 204, 210,
    217, 223, 229, 236, 243, 249, 256, 263, 270, 278, 285, 292, 300, 307, 315, 322,
    330, 338, 346, 354, 362, 370, 379, 387, 395, 404, 413, 421, 430, 439, 448, 457,
    466, 475, 485, 494, 503, 513, 522, 532, 542, 552, 562, 572, 582, 592, 602, 612,
    622, 633, 643, 654, 665, 675, 686, 697, 708, 719, 730, 741, 752, 763, 774, 786,
    797, 809, 820, 832, 843, 855, 867, 879, 890, 902, 914, 926, 938, 951, 963, 975,
    987, 1000, 1012, 1025, 1037, 1050, 1062, 1075, 1087, 1100, 1113, 1126, 1139, 1152, 1164, 1177,
    1190, 1203, 1217, 1230, 1243, 1256, 1269, 1283, 1296, 1309, 1323, 1336, 1349, 1363, 1376, 1390,
    1404, 1417, 1431, 1444, 1458, 1472, 1485, 1499, 1513, 1527, 1540, 1554, 1568, 1582, 1596, 1610,
    1623, 1637, 1651, 1665, 1679, 1693, 1707, 1721, 1735, 1749, 1763, 1777, 1791, 1805, 1819, 1833,
    1847, 1861,
};
extern const uint16_t square_wave[834] = {
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736, 3736,
    3736, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875, 1875,
    1875, 1875,
};
extern const uint16_t sawtooth_wave[834] = {
    1875, 1877, 1879, 1882, 1884, 1886, 1888, 1891, 1893, 1895, 1897, 1900, 1902, 1904, 1906, 1908,
    1911, 1913, 1915, 1917, 1920, 1922, 1924, 1926, 1929, 1931, 1933, 1935, 1937, 1940, 1942, 1944,
    1946, 1949, 1951, 1953, 1955, 1958, 1960, 1962, 1964, 1966, 1969, 1971, 1973, 1975, 1978, 1980,
    1982, 1984, 1987, 1989, 1991, 1993, 1995, 1998, 2000, 2002, 2004, 2007, 2009, 2011, 2013, 2016,
    2018, 2020, 2022, 2025, 2027, 2029, 2031, 2033, 2036, 2038, 2040, 2042, 2045, 2047, 2049, 2051,
    2054, 2056, 2058, 2060, 2062, 2065, 2067, 2069, 2071, 2074, 2076, 2078, 2080, 2083, 2085, 2087,
    2089, 2091, 2094, 2096, 2098, 2100, 2103, 2105, 2107, 2109, 2112, 2114, 2116, 2118, 2120, 2123,
    2125, 2127, 2129, 2132, 2134, 2136, 2138, 2141, 2143, 2145, 2147, 2149, 2152, 2154, 2156, 2158,
    2161, 2163, 2165, 2167, 2170, 2172, 2174, 2176, 2178, 2181, 2183, 2185, 2187, 2190, 2192, 2194,
    2196, 2199, 2201, 2203, 2205, 2207, 2210, 2212, 2214, 2216, 2219, 2221, 2223, 2225, 2228, 2230,
    2232, 2234, 2236, 2239, 2241, 2243, 2245, 2248, 2250, 2252, 2254, 2257, 2259, 2261, 2263, 2265,
    2268, 2270, 2272, 2274, 2277, 2279, 2281, 2283, 2286, 2288, 2290, 2292, 2295, 2297, 2299, 2301,
    2303, 2306, 2308, 2310, 2312, 2315, 2317, 2319, 2321, 2324, 2326, 2328, 2330, 2332, 2335, 2337,
    2339, 2341, 2344, 2346, 2348, 2350, 2353, 2355, 2357, 2359, 2361, 2364, 2366, 2368, 2370, 2373,
    2375, 2377, 2379, 2382, 2384, 2386, 2388, 2390, 2393, 2395, 2397, 2399, 2402, 2404, 2406, 2408,
    2411, 2413, 2415, 2417, 2419, 2422, 2424, 2426, 2428, 2431, 2433, 2435, 2437, 2440, 2442, 2444,
    2446, 2448, 2451, 2453, 2455, 2457, 2460, 2462, 2464, 2466, 2469, 2471, 2473, 2475, 2477, 2480,
    2482, 2484, 2486, 2489, 2491, 2493, 2495, 2498, 2500, 2502, 2504, 2506, 2509, 2511, 2513, 2515,
    2518, 2520, 2522, 2524, 2527, 2529, 2531, 2533, 2535, 2538, 2540, 2542, 2544, 2547, 2549, 2551,
    2553, 2556, 2558, 2560, 2562, 2565, 2567, 2569, 2571, 2573, 2576, 2578, 2580, 2582, 2585, 2587,
    2589, 2591, 2594, 2596, 2598, 2600, 2602, 2605, 2607, 2609, 2611, 2614, 2616, 2618, 2620, 2623,
    2625, 2627, 2629, 2631, 2634, 2636, 2638, 2640, 2643, 2645, 2647, 2649, 2652, 2654, 2656, 2658,
    2660, 2663, 2665, 2667, 2669, 2672, 2674, 2676, 2678, 2681, 2683, 2685, 2687, 2689, 2692, 2694,
    2696, 2698, 2701, 2703, 2705, 2707, 2710, 2712, 2714, 2716, 2718, 2721, 2723, 2725, 2727, 2730,
    2732, 2734, 2736, 2739, 2741, 2743, 2745, 2747, 2750, 2752, 2754, 2756, 2759, 2761, 2763, 2765,
    2768, 2770, 2772, 2774, 2776, 2779, 2781, 2783, 2785, 2788, 2790, 2792, 2794, 2797, 2799, 2801,
    2803, 2806, 2808, 2810, 2812, 2814, 2817, 2819, 2821, 2823, 2826, 2828, 2830, 2832, 2835, 2837,
    2839, 2841, 2843, 2846, 2848, 2850, 2852, 2855, 2857, 2859, 2861, 2864, 2866, 2868, 2870, 2872,
    2875, 2877, 2879, 2881, 2884, 2886, 2888, 2890, 2893, 2895, 2897, 2899, 2901, 2904, 2906, 2908,
    2910, 2913, 2915, 2917, 2919, 2922, 2924, 2926, 2928, 2930, 2933, 2935, 2937, 2939, 2942, 2944,
    2946, 2948, 2951, 2953, 2955, 2957, 2959, 2962, 2964, 2966, 2968, 2971, 2973, 2975, 2977, 2980,
    2982, 2984, 2986, 2988, 2991, 2993, 2995, 2997, 3000, 3002, 3004, 3006, 3009, 3011, 3013, 3015,
    3017, 3020, 3022, 3024, 3026, 3029, 3031, 3033, 3035, 3038, 3040, 3042, 3044, 3046, 3049, 3051,
    3053, 3055, 3058, 3060, 3062, 3064, 3067, 3069, 3071, 3073, 3076, 3078, 3080, 3082, 3084, 3087,
    3089, 3091, 3093, 3096, 3098, 3100, 3102, 3105, 3107, 3109, 3111, 3113, 3116, 3118, 3120, 3122,
    3125, 3127, 3129, 3131, 3134, 3136, 3138, 3140, 3142, 3145, 3147, 3149, 3151, 3154, 3156, 3158,
    3160, 3163, 3165, 3167, 3169, 3171, 3174, 3176, 3178, 3180, 3183, 3185, 3187, 3189, 3192, 3194,
    3196, 3198, 3200, 3203, 3205, 3207, 3209, 3212, 3214, 3216, 3218, 3221, 3223, 3225, 3227, 3229,
    3232, 3234, 3236, 3238, 3241, 3243, 3245, 3247, 3250, 3252, 3254, 3256, 3258, 3261, 3263, 3265,
    3267, 3270, 3272, 3274, 3276, 3279, 3281, 3283, 3285, 3287, 3290, 3292, 3294, 3296, 3299, 3301,
    3303, 3305, 3308, 3310, 3312, 3314, 3316, 3319, 3321, 3323, 3325, 3328, 3330, 3332, 3334, 3337,
    3339, 3341, 3343, 3346, 3348, 3350, 3352, 3354, 3357, 3359, 3361, 3363, 3366, 3368, 3370, 3372,
    3375, 3377, 3379, 3381, 3383, 3386, 3388, 3390, 3392, 3395, 3397, 3399, 3401, 3404, 3406, 3408,
    3410, 3412, 3415, 3417, 3419, 3421, 3424, 3426, 3428, 3430, 3433, 3435, 3437, 3439, 3441, 3444,
    3446, 3448, 3450, 3453, 3455, 3457, 3459, 3462, 3464, 3466, 3468, 3470, 3473, 3475, 3477, 3479,
    3482, 3484, 3486, 3488, 3491, 3493, 3495, 3497, 3499, 3502, 3504, 3506, 3508, 3511, 3513, 3515,
    3517, 3520, 3522, 3524, 3526, 3528, 3531, 3533, 3535, 3537, 3540, 3542, 3544, 3546, 3549, 3551,
    3553, 3555, 3557, 3560, 3562, 3564, 3566, 3569, 3571, 3573, 3575, 3578, 3580, 3582, 3584, 3586,
    3589, 3591, 3593, 3595, 3598, 3600, 3602, 3604, 3607, 3609, 3611, 3613, 3616, 3618, 3620, 3622,
    3624, 3627, 3629, 3631, 3633, 3636, 3638, 3640, 3642, 3645, 3647, 3649, 3651, 3653, 3656, 3658,
    3660, 3662, 3665, 3667, 3669, 3671, 3674, 3676, 3678, 3680, 3682, 3685, 3687, 3689, 3691, 3694,
    3696, 3698, 3700, 3703, 3705, 3707, 3709, 3711, 3714, 3716, 3718, 3720, 3723, 3725, 3727, 3729,
    3732, 3734,
};
extern const uint16_t triangle_wave[834] = {
    1875, 1879, 1884, 1888, 1893, 1897, 1902, 1906, 1911, 1915, 1920, 1924, 1929, 1933, 1937, 1942,
    1946, 1951, 1955, 1960, 1964, 1969, 1973, 1978, 1982, 1987, 1991, 1995, 2000, 2004, 2009, 2013,
    2018, 2022, 2027, 2031, 2036, 2040, 2045, 2049, 2054, 2058, 2062, 2067, 2071, 2076, 2080, 2085,
    2089, 2094, 2098, 2103, 2107, 2112, 2116, 2120, 2125, 2129, 2134, 2138, 2143, 2147, 2152, 2156,
    2161, 2165, 2170, 2174, 2178, 2183, 2187, 2192, 2196, 2201, 2205, 2210, 2214, 2219, 2223, 2228,
    2232, 2236, 2241, 2245, 2250, 2254, 2259, 2263, 2268, 2272, 2277, 2281, 2286, 2290, 2295, 2299,
    2303, 2308, 2312, 2317, 2321, 2326, 2330, 2335, 2339, 2344, 2348, 2353, 2357, 2361, 2366, 2370,
    2375, 2379, 2384, 2388, 2393, 2397, 2402, 2406, 2411, 2415, 2419, 2424, 2428, 2433, 2437, 2442,
    2446, 2451, 2455, 2460, 2464, 2469, 2473, 2477, 2482, 2486, 2491, 2495, 2500, 2504, 2509, 2513,
    2518, 2522, 2527, 2531, 2535, 2540, 2544, 2549, 2553, 2558, 2562, 2567, 2571, 2576, 2580, 2585,
    2589, 2594, 2598, 2602, 2607, 2611, 2616, 2620, 2625, 2629, 2634, 2638, 2643, 2647, 2652, 2656,
    2660, 2665, 2669, 2674, 2678, 2683, 2687, 2692, 2696, 2701, 2705, 2710, 2714, 2718, 2723, 2727,
    2732, 2736, 2741, 2745, 2750, 2754, 2759, 2763, 2768, 2772, 2776, 2781, 2785, 2790, 2794, 2799,
    2803, 2808, 2812, 2817, 2821, 2826, 2830, 2835, 2839, 2843, 2848, 2852, 2857, 2861, 2866, 2870,
    2875, 2879, 2884, 2888, 2893, 2897, 2901, 2906, 2910, 2915, 2919, 2924, 2928, 2933, 2937, 2942,
    2946, 2951, 2955, 2959, 2964, 2968, 2973, 2977, 2982, 2986, 2991, 2995, 3000, 3004, 3009, 3013,
    3017, 3022, 3026, 3031, 3035, 3040, 3044, 3049, 3053, 3058, 3062, 3067, 3071, 3076, 3080, 3084,
    3089, 3093, 3098, 3102, 3107, 3111, 3116, 3120, 3125, 3129, 3134, 3138, 3142, 3147, 3151, 3156,
    3160, 3165, 3169, 3174, 3178, 3183, 3187, 3192, 3196, 3200, 3205, 3209, 3214, 3218, 3223, 3227,
    3232, 3236, 3241, 3245, 3250, 3254, 3258, 3263, 3267, 3272, 3276, 3281, 3285, 3290, 3294, 3299,
    3303, 3308, 3312, 3316, 3321, 3325, 3330, 3334, 3339, 3343, 3348, 3352, 3357, 3361, 3366, 3370,
    3375, 3379, 3383, 3388, 3392, 3397, 3401, 3406, 3410, 3415, 3419, 3424, 3428, 3433, 3437, 3441,
    3446, 3450, 3455, 3459, 3464, 3468, 3473, 3477, 3482, 3486, 3491, 3495, 3499, 3504, 3508, 3513,
    3517, 3522, 3526, 3531, 3535, 3540, 3544, 3549, 3553, 3557, 3562, 3566, 3571, 3575, 3580, 3584,
    3589, 3593, 3598, 3602, 3607, 3611, 3616, 3620, 3624, 3629, 3633, 3638, 3642, 3647, 3651, 3656,
    3660, 3665, 3669, 3674, 3678, 3682, 3687, 3691, 3696, 3700, 3705, 3709, 3714, 3718, 3723, 3727,
    3732, 3736, 3732, 3727, 3723, 3718, 3714, 3709, 3705, 3700, 3696, 3691, 3687, 3682, 3678, 3674,
    3669, 3665, 3660, 3656, 3651, 3647, 3642, 3638, 3633, 3629, 3624, 3620, 3616, 3611, 3607, 3602,
    3598, 3593, 3589, 3584, 3580, 3575, 3571, 3566, 3562, 3557, 3553, 3549, 3544, 3540, 3535, 3531,
    3526, 3522, 3517, 3513, 3508, 3504, 3499, 3495, 3491, 3486, 3482, 3477, 3473, 3468, 3464, 3459,
    3455, 3450, 3446, 3441, 3437, 3433, 3428, 3424, 3419, 3415, 3410, 3406, 3401, 3397, 3392, 3388,
    3383, 3379, 3375, 3370, 3366, 3361, 3357, 3352, 3348, 3343, 3339, 3334, 3330, 3325, 3321, 3316,
    3312, 3308, 3303, 3299, 3294, 3290, 3285, 3281, 3276, 3272, 3267, 3263, 3258, 3254, 3250, 3245,
    3241, 3236, 3232, 3227, 3223, 3218, 3214, 3209, 3205, 3200, 3196, 3192, 3187, 3183, 3178, 3174,
    3169, 3165, 3160, 3156, 3151, 3147, 3142, 3138, 3134, 3129, 3125, 3120, 3116, 3111, 3107, 3102,
    3098, 3093, 3089, 3084, 3080, 3076, 3071, 3067, 3062, 3058, 3053, 3049, 3044, 3040, 3035, 3031,
    3026, 3022, 3017, 3013, 3009, 3004, 3000, 2995, 2991, 2986, 2982, 2977, 2973, 2968, 2964, 2959,
    2955, 2951, 2946, 2942, 2937, 2933, 2928, 2924, 2919, 2915, 2910, 2906, 2901, 2897, 2893, 2888,
    2884, 2879, 2875, 2870, 2866, 2861, 2857, 2852, 2848, 2843, 2839, 2835, 2830, 2826, 2821, 2817,
    2812, 2808, 2803, 2799, 2794, 2790, 2785, 2781, 2776, 2772, 2768, 2763, 2759, 2754, 2750, 2745,
    2741, 2736, 2732, 2727, 2723, 2718, 2714, 2710, 2705, 2701, 2696, 2692, 2687, 2683, 2678, 2674,
    2669, 2665, 2660, 2656, 2652, 2647, 2643, 2638, 2634, 2629, 2625, 2620, 2616, 2611, 2607, 2602,
    2598, 2594, 2589, 2585, 2580, 2576, 2571, 2567, 2562, 2558, 2553, 2549, 2544, 2540, 2535, 2531,
    2527, 2522, 2518, 2513, 2509, 2504, 2500, 2495, 2491, 2486, 2482, 2477, 2473, 2469, 2464, 2460,
    2455, 2451, 2446, 2442, 2437, 2433, 2428, 2424, 2419, 2415, 2411, 2406, 2402, 2397, 2393, 2388,
    2384, 2379, 2375, 2370, 2366, 2361, 2357, 2353, 2348, 2344, 2339, 2335, 2330, 2326, 2321, 2317,
    2312, 2308, 2303, 2299, 2295, 2290, 2286, 2281, 2277, 2272, 2268, 2263, 2259, 2254, 2250, 2245,
    2241, 2236, 2232, 2228, 2223, 2219, 2214, 2210, 2205, 2201, 2196, 2192, 2187, 2183, 2178, 2174,
    2170, 2165, 2161, 2156, 2152, 2147, 2143, 2138, 2134, 2129, 2125, 2120, 2116, 2112, 2107, 2103,
    2098, 2094, 2089, 2085, 2080, 2076, 2071, 2067, 2062, 2058, 2054, 2049, 2045, 2040, 2036, 2031,
    2027, 2022, 2018, 2013, 2009, 2004, 2000, 1995, 1991, 1987, 1982, 1978, 1973, 1969, 1964, 1960,
    1955, 1951, 1946, 1942, 1937, 1933, 1929, 1924, 1920, 1915, 1911, 1906, 1902, 1897, 1893, 1888,
    1884, 1879,
};
External_DAC::External_DAC() {

}

External_DAC::~External_DAC() {
}

void External_DAC::DAC_init(void)
{
    RCC->AHB2ENR |= RCC_AHB2ENR_GPIOAEN;
    GPIOA->MODER &= ~(GPIO_MODER_MODE4 | GPIO_MODER_MODE5 | GPIO_MODER_MODE6 | GPIO_MODER_MODE7);
    GPIOA->MODER |= (GPIO_MODER_MODE4_1 | GPIO_MODER_MODE5_1 | GPIO_MODER_MODE6_1 | GPIO_MODER_MODE7_1);
    GPIOA->AFR[0] &= ~(GPIO_AFRL_AFSEL4 | GPIO_AFRL_AFSEL5 | GPIO_AFRL_AFSEL6 | GPIO_AFRL_AFSEL7);
    GPIOA->AFR[0] |= ((5 << GPIO_AFRL_AFSEL4_Pos) | (5 << GPIO_AFRL_AFSEL5_Pos) | (5 << GPIO_AFRL_AFSEL6_Pos) | (5 << GPIO_AFRL_AFSEL7_Pos));
    GPIOA->OTYPER &= ~(GPIO_OTYPER_OT4 | GPIO_OTYPER_OT5 | GPIO_OTYPER_OT6 | GPIO_OTYPER_OT7);
    GPIOA->PUPDR &= ~(GPIO_PUPDR_PUPD4 | GPIO_PUPDR_PUPD5 | GPIO_PUPDR_PUPD6 | GPIO_PUPDR_PUPD7);
    RCC->APB2ENR |= RCC_APB2ENR_SPI1EN;
    SPI1->CR1 = SPI_CR1_MSTR | SPI_CR1_BR_1;  // Set prescaler to fPCLK/4
    SPI1->CR2 = SPI_CR2_SSOE | SPI_CR2_NSSP | (0xF << SPI_CR2_DS_Pos);
    SPI1->CR1 |= SPI_CR1_SPE;
}

// Convert a voltage value into a 12-bit value to control the DAC
uint16_t External_DAC::DAC_mvolt_convert(float mvoltage)
{
	return (mvoltage * 4095) / 3300;
}

void External_DAC::DAC_write(uint16_t value_A, uint16_t value_B)
//void External_DAC::DAC_write(uint16_t value_A)
{
    uint16_t spi_data_A = (value_A & 0x0FFF) | 0x3000;  // For DACA
    uint16_t spi_data_B = (value_B & 0x0FFF) | 0xB000;  // For DACB

    // Write to DACA
    while(!(SPI1->SR & SPI_SR_TXE));
    SPI1->DR = spi_data_A;

    // Write to DACB
    while(!(SPI1->SR & SPI_SR_TXE));
    SPI1->DR = spi_data_B;
}


/* Matlab script for generating lookup tables
% Parameters
fs = 256;  % Sampling frequency
t = 0:1/fs:1-1/fs;  % Time vector
Vref = 3.3;  % Reference voltage
bit_depth = 4095;  % 12-bit DAC
dc_offset = 1.5;  % DC offset in volts
Vpp = 3.0;  % Peak-to-peak voltage in volts

% Scaling factors
scale_factor = bit_depth / Vref;
dc_offset_scaled = round(dc_offset * scale_factor);
amplitude_scaled = round((Vpp / 2) * scale_factor);

% Generate Sine Wave
sine_wave = round(dc_offset_scaled + amplitude_scaled * sin(2 * pi * t));

% Generate Square Wave
square_wave = round(dc_offset_scaled + amplitude_scaled * (square(2 * pi * t) + 1) / 2);

% Generate Triangle Wave
triangle_wave = round(dc_offset_scaled + amplitude_scaled * (sawtooth(2 * pi * t, 0.5) + 1) / 2);

% Generate Sawtooth Wave
sawtooth_wave = round(dc_offset_scaled + amplitude_scaled * (sawtooth(2 * pi * t) + 1) / 2);

% Print Lookup Tables
print_lookup_table('sine_wave', sine_wave);
print_lookup_table('square_wave', square_wave);
print_lookup_table('sawtooth_wave', sawtooth_wave);
print_lookup_table('triangle_wave', triangle_wave);

% Function to print lookup table in 16x16 format
function print_lookup_table(name, data)
    fprintf('extern const uint16_t %s[%d] = {\n', name, length(data));
    for i = 1:16:length(data)
        fprintf('    ');
        fprintf('%d, ', data(i:min(i+15, end)));
        fprintf('\n');
    end
    fprintf('};\n');
end
 */




